
    <!DOCTYPE html>
    <html lang="vi">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Bài Tập Luyện Tập</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;600;700&display=swap" rel="stylesheet">
        <script>
            window.MathJax = {
                tex: {
                    packages: {'[+]': ['ams']},
                    inlineMath: [['$', '$'], ['\\(', '\\)']],
                    displayMath: [['$$', '$$'], ['\\[', '\\]']]
                },
                chtml: {
                    fontCache: 'global',
                    linebreaks: {
                        automatic: true
                    }
                }
            };
        </script>
        <script type="text/javascript" id="MathJax-script" async
            src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
        </script>
        <style>
            body { font-family: 'Be Vietnam Pro', sans-serif; background-color: #f0f4f8; }
            .loader { border: 4px solid #f3f3f3; border-top: 4px solid #3b82f6; border-radius: 50%; width: 24px; height: 24px; animation: spin 1s linear infinite; }
            @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
            .question-card {
                background-color: white;
                border-radius: 1rem;
                padding: 1.5rem 2rem;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
                border-left: 5px solid transparent;
                transition: all 0.3s ease;
            }
            .ai-explanation {
                background-color: #f0f9ff;
                color: #0c4a6e;
                padding: 1rem;
                border-radius: 0.75rem;
                font-size: 0.9rem;
                margin-top: 1rem;
                border-left: 4px solid #38bdf8;
            }
            .feedback-icon { width: 1.5rem; height: 1.5rem; }
            .option-label {
                transition: all 0.2s ease-in-out;
                border: 2px solid #e5e7eb;
            }
            .option-label:hover {
                border-color: #6366f1;
                background-color: #eef2ff;
            }
            .option-label.correct {
                border-color: #10b981 !important;
                background-color: #ecfdf5 !important;
                color: #065f46;
            }
            .option-label.incorrect {
                border-color: #ef4444 !important;
                background-color: #fef2f2 !important;
                color: #991b1b;
            }
            .statement-item.correct { background-color: #ecfdf5; border-color: #10b981; }
            .statement-item.incorrect { background-color: #fef2f2; border-color: #ef4444; }
            .prose { max-width: 100%; }
            .prose h1, .prose h2, .prose h3 { font-weight: 600; }
            .prose p { margin-top: 0.5em; margin-bottom: 0.5em; }
            .prose ul, .prose ol { margin-top: 1em; margin-bottom: 1em; padding-left: 1.5em; }
            .prose li > p { margin-top: 0; margin-bottom: 0; }
            .prose code { background-color: #e5e7eb; padding: 0.2em 0.4em; margin: 0; font-size: 85%; border-radius: 3px; }
            .prose pre { background-color: #e5e7eb; padding: 1em; border-radius: 0.5em; overflow-x: auto; }
            .prose pre code { background-color: transparent; padding: 0; }
            details[open] > summary .details-arrow {
                transform: rotate(180deg);
            }
        </style>
    </head>
    <body class="bg-slate-100 text-slate-800">
        <div id="login-modal" class="fixed inset-0 bg-gray-900 bg-opacity-60 backdrop-blur-sm flex items-center justify-center z-50 p-4">
            <div class="bg-white p-8 rounded-2xl shadow-2xl w-full max-w-md transform transition-all" style="animation: fadeIn 0.3s ease-out;">
                <h2 class="text-2xl font-bold mb-2 text-center text-slate-800">Thông Tin Học Sinh</h2>
                <p class="text-center text-slate-500 mb-6">Vui lòng nhập để bắt đầu làm bài.</p>
                <form id="student-info-form">
                    <div class="mb-4">
                        <label for="student-name" class="block text-sm font-medium text-slate-700 mb-1">Họ và tên</label>
                        <input type="text" id="student-name" required class="mt-1 block w-full block border border-slate-300 rounded-lg shadow-sm py-2.5 px-3 focus:border-indigo-500 focus:ring-indigo-500">
                    </div>
                    <div class="mb-4">
                        <label for="student-class" class="block text-sm font-medium text-slate-700 mb-1">Lớp</label>
                        <input type="text" id="student-class" required class="mt-1 block w-full border border-slate-300 rounded-lg shadow-sm py-2.5 px-3 focus:border-indigo-500 focus:ring-indigo-500">
                    </div>
                    <div class="mb-4">
                        <label for="exam-code" class="block text-sm font-medium text-slate-700 mb-1">Mã đề</label>
                        <input type="text" id="exam-code" required class="mt-1 block w-full border border-slate-300 rounded-lg shadow-sm py-2.5 px-3 focus:border-indigo-500 focus:ring-indigo-500" placeholder="Nhập mã đề giáo viên cung cấp">
                    </div>
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-slate-700 mb-1">Giáo viên:</label>
                        <p class="mt-1 text-slate-800 bg-slate-100 p-2.5 rounded-lg">LÊ VĂN ĐÔNG</p>
                    </div>
                    <button type="submit" class="w-full bg-indigo-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-transform transform hover:scale-105">Bắt đầu làm bài</button>
                </form>
            </div>
        </div>
        <div class="container mx-auto p-4 md:p-8 max-w-4xl">
            <header class="mb-10 p-8 rounded-xl bg-gradient-to-r from-blue-500 to-indigo-600 text-white shadow-lg">
                <div class="flex justify-between items-center flex-wrap gap-4">
                    <div>
                        <h1 class="text-4xl font-bold">Bài Tập Luyện Tập</h1>
                        <p class="text-lg text-blue-100 mt-2">Hãy hoàn thành các câu hỏi dưới đây một cách tốt nhất!</p>
                        <p class="text-sm text-blue-200 mt-4">Tác giả: LÊ VĂN ĐÔNG</p>
                    </div>
                    <div id="timer-container" class="text-right">
                         <div id="timer-display" class="text-3xl font-bold tracking-wider bg-white/20 px-4 py-2 rounded-lg">--:--</div>
                         <div id="retries-display" class="text-sm mt-1 text-blue-200"></div>
                    </div>
                </div>
            </header>
            <main id="student-quiz-container" class="space-y-8 hidden">
                <!-- Questions will be rendered here by JS -->
            </main>
            <footer class="mt-10 text-center">
                <button id="submit-quiz-btn" class="bg-indigo-600 text-white py-3 px-12 rounded-full font-bold text-lg hover:bg-indigo-700 transition-all duration-300 shadow-lg hover:shadow-xl hidden transform hover:scale-105">Nộp Bài</button>
                <div id="result-container" class="mt-6 hidden"></div>
                <div id="ai-feedback-container" class="mt-8 text-left hidden"></div>
                <div id="post-submit-options" class="hidden mt-6 flex flex-col sm:flex-row items-center justify-center gap-4">
                    <button id="retry-quiz-btn" class="w-full sm:w-auto bg-slate-600 text-white py-2.5 px-6 rounded-lg font-semibold hover:bg-slate-700 transition-transform transform hover:scale-105">Làm Lại Đề Này</button>
                </div>
            </footer>
        </div>

        <div id="proctoring-widget" class="fixed bottom-4 right-4 bg-yellow-100 text-yellow-800 p-3 rounded-lg shadow-lg text-sm z-50 hidden border border-yellow-300" style="max-width: 200px;">
            <h4 class="font-bold mb-2 border-b border-yellow-300 pb-1 flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" /></svg>
                Giám sát
            </h4>
            <p>Thoát màn hình: <span id="tab-switch-count" class="font-bold">0</span></p>
            <p>Sao chép: <span id="copy-count" class="font-bold">0</span></p>
            <p>Dán: <span id="paste-count" class="font-bold">0</span></p>
        </div>

        <script type="module">
            import { GoogleGenAI, Type } from "https://esm.sh/@google/genai@^1.13.0";
            let quizData = [{"type":"multiple-choice","question":"<strong></strong> Khái niệm Trí tuệ nhân tạo (AI) được hiểu một cách sơ lược là gì?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Là một loại robot thông minh có khả năng làm việc nhà.","Là một lĩnh vực khoa học nghiên cứu và phát triển máy móc có thể tư duy, học hỏi và giải quyết vấn đề như con người.","Là một phần mềm giúp máy tính tính toán nhanh hơn gấp nhiều lần.","Là công nghệ giúp con người giao tiếp với máy tính bằng giọng nói."],"optionsImage":[null,null,null,null],"correctAnswerIndex":1},{"type":"multiple-choice","question":"<strong></strong> Đặc trưng nào sau đây KHÔNG phải là một đặc trưng cơ bản của AI?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Khả năng học hỏi từ dữ liệu.","Khả năng suy luận và đưa ra quyết định.","Khả năng nhận thức môi trường xung quanh.","Khả năng tự sản xuất phần cứng máy tính."],"optionsImage":[null,null,null,null],"correctAnswerIndex":3},{"type":"multiple-choice","question":"<strong></strong> Ứng dụng nào dưới đây là một ví dụ về hệ chuyên gia trong lĩnh vực AI?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Hệ thống hỗ trợ chẩn đoán bệnh dựa trên triệu chứng.","Ứng dụng dịch ngôn ngữ trực tuyến.","Robot hút bụi tự động.","Trợ lí ảo trên điện thoại thông minh."],"optionsImage":[null,null,null,null],"correctAnswerIndex":0},{"type":"multiple-choice","question":"<strong></strong> Lĩnh vực nào sau đây phát triển mạnh mẽ nhờ ứng dụng của AI trong việc phân tích dữ liệu thị trường và dự đoán xu hướng?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Y học.","Giáo dục.","Tài chính.","Sản xuất."],"optionsImage":[null,null,null,null],"correctAnswerIndex":2},{"type":"multiple-choice","question":"<strong></strong> Cảnh báo nào sau đây về sự phát triển của AI thường liên quan đến việc máy móc thay thế công việc của con người?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Áp lực thất nghiệp.","Vấn đề bảo mật dữ liệu.","Sự phụ thuộc quá mức vào công nghệ.","Rủi ro về đạo đức."],"optionsImage":[null,null,null,null],"correctAnswerIndex":0},{"type":"multiple-choice","question":"<strong></strong> Ví dụ nào sau đây thể hiện khả năng hiểu ngôn ngữ tự nhiên của AI?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Robot lắp ráp linh kiện trong nhà máy.","Hệ thống phân tích hình ảnh y tế.","Xe tự lái.","Trợ lí ảo trên điện thoại."],"optionsImage":[null,null,null,null],"correctAnswerIndex":3},{"type":"multiple-choice","question":"<strong></strong> Đặc trưng 'khả năng học' của AI có nghĩa là gì?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Hệ thống có thể tự điều chỉnh và cải thiện hiệu suất dựa trên dữ liệu và kinh nghiệm.","Hệ thống có thể ghi nhớ tất cả thông tin được cung cấp.","Hệ thống có thể tự động viết mã chương trình mới.","Hệ thống có thể giao tiếp với con người bằng ngôn ngữ tự nhiên."],"optionsImage":[null,null,null,null],"correctAnswerIndex":0},{"type":"multiple-choice","question":"<strong></strong> Trong các ứng dụng sau, ứng dụng nào của AI giúp xe ô tô có thể tự động di chuyển mà không cần sự điều khiển trực tiếp của con người?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Hệ thống dự báo thời tiết.","Phần mềm dịch thuật.","Xe tự lái.","Robot công nghiệp."],"optionsImage":[null,null,null,null],"correctAnswerIndex":2},{"type":"multiple-choice","question":"<strong></strong> Lĩnh vực giáo dục được hưởng lợi từ AI thông qua việc gì?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Tự động hóa hoàn toàn việc giảng dạy.","Cá nhân hóa lộ trình học tập và đánh giá học sinh.","Thay thế hoàn toàn giáo viên bằng robot.","Chỉ cung cấp các khóa học trực tuyến."],"optionsImage":[null,null,null,null],"correctAnswerIndex":1},{"type":"multiple-choice","question":"<strong></strong> Một cảnh báo khác về sự phát triển của AI là quyền riêng tư. Điều này liên quan đến vấn đề gì?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["AI có thể chiếm đoạt tài sản cá nhân.","AI không thể hoạt động nếu không có dữ liệu riêng tư.","AI có thể tự động thay đổi thông tin cá nhân của người dùng.","AI thu thập và phân tích lượng lớn dữ liệu cá nhân, có thể dẫn đến việc xâm phạm quyền riêng tư."],"optionsImage":[null,null,null,null],"correctAnswerIndex":3},{"type":"multiple-choice","question":"<strong></strong> Điểm khác biệt cốt lõi giữa trí tuệ con người và Trí tuệ nhân tạo (AI) là gì?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Trí tuệ con người không thể xử lý thông tin nhanh bằng AI.","Trí tuệ con người có cảm xúc, ý thức và sáng tạo, điều mà AI chỉ có thể mô phỏng.","AI luôn có khả năng học hỏi tốt hơn con người.","Trí tuệ con người không thể thực hiện các tác vụ phức tạp như AI."],"optionsImage":[null,null,null,null],"correctAnswerIndex":1},{"type":"multiple-choice","question":"<strong></strong> Khi một hệ thống AI được sử dụng để phát hiện các giao dịch gian lận trong ngân hàng, nó đang thể hiện đặc trưng nào của AI?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Khả năng giao tiếp.","Khả năng giải quyết vấn đề và suy luận.","Khả năng sáng tạo nghệ thuật.","Khả năng vận động cơ học."],"optionsImage":[null,null,null,null],"correctAnswerIndex":1},{"type":"multiple-choice","question":"<strong></strong> Hệ thống AI dịch tự động như Google Translate hoạt động dựa trên nguyên tắc cơ bản nào?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Ghi nhớ từng cặp từ điển của tất cả các ngôn ngữ.","Dựa vào lập trình thủ công từng quy tắc ngữ pháp.","Phân tích ngữ cảnh, cấu trúc câu và học từ các kho dữ liệu dịch lớn.","Sử dụng cảm biến để nhận diện từ ngữ."],"optionsImage":[null,null,null,null],"correctAnswerIndex":2},{"type":"multiple-choice","question":"<strong></strong> Tại sao việc ứng dụng AI trong y học lại được coi là một bước tiến quan trọng?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Nó giúp tăng tốc độ chẩn đoán, đưa ra phác đồ điều trị cá nhân hóa và hỗ trợ phẫu thuật.","Nó giúp thay thế hoàn toàn bác sĩ.","Nó giúp giảm chi phí điều trị đến mức tối thiểu.","Nó chỉ được dùng để quản lí hồ sơ bệnh án."],"optionsImage":[null,null,null,null],"correctAnswerIndex":0},{"type":"multiple-choice","question":"<strong></strong> Khi AI được sử dụng để tạo ra các tác phẩm nghệ thuật hoặc âm nhạc, cảnh báo nào có thể nảy sinh về mặt đạo đức?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["AI không thể tạo ra sản phẩm chất lượng.","Sự thay thế của nghệ sĩ con người.","AI gây lãng phí năng lượng.","Vấn đề về bản quyền và sở hữu trí tuệ của tác phẩm do AI tạo ra."],"optionsImage":[null,null,null,null],"correctAnswerIndex":3},{"type":"multiple-choice","question":"<strong></strong> Trợ lí ảo như Alexa hay Google Assistant được coi là ứng dụng AI vì chúng có khả năng gì?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Làm sạch nhà cửa tự động.","Hiểu và phản hồi các lệnh bằng giọng nói, học hỏi sở thích người dùng.","Chỉ phát nhạc theo yêu cầu.","Tự động đặt hàng trên mạng."],"optionsImage":[null,null,null,null],"correctAnswerIndex":1},{"type":"multiple-choice","question":"<strong></strong> Điểm khác biệt chính giữa Học máy (Machine Learning) và AI tổng quát (General AI) là gì?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Học máy giải quyết các tác vụ cụ thể, trong khi AI tổng quát có khả năng giải quyết nhiều loại tác vụ như con người.","Học máy không cần dữ liệu, còn AI tổng quát cần rất nhiều dữ liệu.","Học máy là một thuật ngữ cũ của AI.","AI tổng quát đã được triển khai rộng rãi, còn Học máy chỉ mới bắt đầu."],"optionsImage":[null,null,null,null],"correctAnswerIndex":0},{"type":"multiple-choice","question":"<strong></strong> Hệ thống khuyến nghị sản phẩm trên các trang thương mại điện tử (ví dụ: 'Bạn có thể thích...') là một ví dụ về ứng dụng AI nào?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Robot công nghiệp.","Xe tự lái.","Hệ thống nhận dạng giọng nói.","Hệ thống khuyến nghị."],"optionsImage":[null,null,null,null],"correctAnswerIndex":3},{"type":"multiple-choice","question":"<strong></strong> Tại sao AI được xem là công cụ quan trọng trong việc tối ưu hóa quy trình sản xuất công nghiệp?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["AI giúp thay thế tất cả công nhân trong nhà máy.","AI giúp phân tích dữ liệu, phát hiện lỗi, tối ưu hóa hiệu suất và giảm chi phí.","AI chỉ được dùng để điều khiển robot.","AI làm cho quá trình sản xuất trở nên chậm hơn nhưng chính xác hơn."],"optionsImage":[null,null,null,null],"correctAnswerIndex":1},{"type":"multiple-choice","question":"<strong></strong> Rủi ro an ninh liên quan đến AI có thể xảy ra khi nào?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Khi AI quá thông minh.","Khi AI không có đủ dữ liệu.","Khi AI tự động cập nhật phần mềm.","Khi các hệ thống AI bị tin tặc tấn công hoặc được sử dụng để tạo ra các mối đe dọa an ninh mới."],"optionsImage":[null,null,null,null],"correctAnswerIndex":3},{"type":"multiple-choice","question":"<strong></strong> Thuật ngữ 'máy học' (Machine Learning) trong AI đề cập đến khả năng nào?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Khả năng của máy tính tự động học hỏi và cải thiện hiệu suất từ dữ liệu.","Khả năng của máy tính ghi nhớ một lượng lớn thông tin.","Khả năng của máy tính thực hiện các phép tính số học phức tạp.","Khả năng của máy tính giao tiếp bằng ngôn ngữ con người."],"optionsImage":[null,null,null,null],"correctAnswerIndex":0},{"type":"multiple-choice","question":"<strong></strong> Trong một hệ thống dịch tự động, công nghệ AI nào đóng vai trò chính để hiểu ngữ nghĩa và cấu trúc câu của ngôn ngữ đầu vào?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Thị giác máy tính.","Robot học.","Xử lí ngôn ngữ tự nhiên (NLP).","Mạng nơ-ron truyền thẳng."],"optionsImage":[null,null,null,null],"correctAnswerIndex":2},{"type":"multiple-choice","question":"<strong></strong> Một ứng dụng của AI giúp các hệ thống phát hiện khuôn mặt, nhận diện vật thể và phân tích hình ảnh được gọi là gì?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Thị giác máy tính (Computer Vision).","Hệ chuyên gia.","Học tăng cường (Reinforcement Learning).","Hệ thống khuyến nghị."],"optionsImage":[null,null,null,null],"correctAnswerIndex":0},{"type":"multiple-choice","question":"Trong bối cảnh phát triển công nghệ, một yếu tố đạo đức quan trọng của trí tuệ nhân tạo (AI) là 'khả năng giải thích' (explainability). 'Khả năng giải thích' trong AI có nghĩa là gì?","questionImage":null,"mappedType":"multiple-choice","options":["AI có khả năng tự động cập nhật và cải thiện hiệu suất của mình.","AI có thể hoạt động mà không cần sự can thiệp hoặc giám sát của con người.","AI có khả năng cung cấp những lý do rõ ràng, minh bạch để con người có thể hiểu được cách thức và cơ sở của các quyết định hoặc dự đoán của nó.","AI luôn đưa ra các quyết định hoàn hảo và không bao giờ mắc lỗi."],"optionsImage":[],"correctAnswerIndex":2},{"type":"multiple-choice","question":"<strong></strong> Trong ngành giao thông vận tải, AI có thể giúp giải quyết vấn đề tắc nghẽn giao thông bằng cách nào?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Chỉ dùng để điều khiển xe buýt.","Phát triển các loại xe mới có tốc độ cao hơn.","Giảm số lượng phương tiện tham gia giao thông.","Phân tích dữ liệu giao thông theo thời gian thực để tối ưu hóa luồng xe, đèn tín hiệu và lộ trình."],"optionsImage":[null,null,null,null],"correctAnswerIndex":3},{"type":"multiple-choice","question":"<strong></strong> Một công ty muốn phát triển một ứng dụng AI có thể dự đoán giá cổ phiếu trong tương lai dựa trên dữ liệu lịch sử. Loại hình AI nào sẽ phù hợp nhất?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Robot.","Học máy (Machine Learning).","Hệ chuyên gia dựa trên quy tắc.","Trợ lí ảo."],"optionsImage":[null,null,null,null],"correctAnswerIndex":1},{"type":"multiple-choice","question":"<strong></strong> Điều gì là quan trọng nhất để một hệ thống AI có thể 'học' hiệu quả?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Dữ liệu lớn và chất lượng cao.","Kích thước của máy tính.","Tốc độ xử lí của CPU.","Số lượng lập trình viên tham gia dự án."],"optionsImage":[null,null,null,null],"correctAnswerIndex":0},{"type":"multiple-choice","question":"<strong></strong> Ứng dụng nào sau đây của AI giúp tự động hóa việc sắp xếp lịch trình, trả lời email và quản lí công việc cho người dùng?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Hệ thống nhận dạng khuôn mặt.","Xe tự lái.","Robot công nghiệp.","Trợ lí ảo cá nhân."],"optionsImage":[null,null,null,null],"correctAnswerIndex":3},{"type":"multiple-choice","question":"<strong></strong> Mối lo ngại về 'Quyền riêng tư' khi AI phát triển mạnh mẽ thể hiện rõ nhất trong trường hợp nào?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Khi AI tạo ra các tác phẩm nghệ thuật.","Khi các hệ thống AI thu thập và phân tích lượng lớn dữ liệu cá nhân của người dùng mà không có sự đồng ý rõ ràng.","Khi robot làm việc trong nhà máy.","Khi AI hỗ trợ bác sĩ chẩn đoán bệnh."],"optionsImage":[null,null,null,null],"correctAnswerIndex":1},{"type":"multiple-choice","question":"<strong></strong> Hệ thống AI được sử dụng trong lĩnh vực sản xuất để làm gì?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Dịch tài liệu sản xuất.","Chỉ để giải trí cho công nhân.","Kiểm soát chất lượng sản phẩm, dự đoán bảo trì và tối ưu hóa quy trình sản xuất.","Thay thế hoàn toàn sự giám sát của con người."],"optionsImage":[null,null,null,null],"correctAnswerIndex":2},{"type":"multiple-choice","question":"<strong></strong> Một công ty công nghệ phát triển một hệ thống AI có thể tự động viết báo cáo tài chính hàng quý. Hệ thống này thể hiện đặc trưng nào của AI?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Khả năng nhận biết hình ảnh.","Khả năng hiểu ngôn ngữ và giải quyết vấn đề.","Khả năng điều khiển robot.","Khả năng cảm xúc."],"optionsImage":[null,null,null,null],"correctAnswerIndex":1},{"type":"multiple-choice","question":"<strong></strong> Ứng dụng nào của AI giúp các ngân hàng phát hiện và ngăn chặn các giao dịch tín dụng giả mạo?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Hệ thống phát hiện gian lận tài chính.","Robot chăm sóc khách hàng.","Trợ lí ảo.","Phần mềm dịch thuật."],"optionsImage":[null,null,null,null],"correctAnswerIndex":0},{"type":"multiple-choice","question":"<strong></strong> Nếu một hệ thống AI được lập trình để chơi cờ vua và học hỏi từ mỗi ván đấu, nó đang sử dụng khả năng gì để cải thiện?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Khả năng nhận thức.","Khả năng giao tiếp.","Khả năng học hỏi.","Khả năng tạo hình ảnh."],"optionsImage":[null,null,null,null],"correctAnswerIndex":2},{"type":"multiple-choice","question":"<strong></strong> Lĩnh vực y học ứng dụng AI để làm gì?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Chỉ để quản lí hồ sơ bệnh án.","Chẩn đoán bệnh sớm hơn, phát triển thuốc và cá nhân hóa liệu trình điều trị.","Thay thế hoàn toàn bác sĩ trong phòng mổ.","Thực hiện các ca phẫu thuật mà không cần sự giám sát của con người."],"optionsImage":[null,null,null,null],"correctAnswerIndex":1},{"type":"multiple-choice","question":"<strong></strong> Cảnh báo nào về AI liên quan đến việc AI có thể bị lạm dụng cho mục đích xấu, như tạo ra vũ khí tự động?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Áp lực thất nghiệp.","Vấn đề quyền riêng tư.","Thiên vị dữ liệu.","Rủi ro an ninh và lạm dụng cho mục đích xấu."],"optionsImage":[null,null,null,null],"correctAnswerIndex":3},{"type":"multiple-choice","question":"<strong></strong> Một công ty muốn sử dụng AI để tự động hóa việc phân loại email và chuyển tiếp chúng đến các phòng ban phù hợp. Ứng dụng AI nào là thích hợp nhất?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Xử lí ngôn ngữ tự nhiên (NLP).","Thị giác máy tính.","Robot công nghiệp.","Học tăng cường."],"optionsImage":[null,null,null,null],"correctAnswerIndex":0},{"type":"multiple-choice","question":"<strong></strong> Trong lĩnh vực tài chính, AI có thể giúp các nhà đầu tư đưa ra quyết định tốt hơn bằng cách nào?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Chỉ giao dịch tự động.","Phân tích dữ liệu thị trường khổng lồ và dự đoán xu hướng giá cổ phiếu.","Thay thế hoàn toàn con người trong việc quản lí quỹ đầu tư.","Chỉ thực hiện các giao dịch nhỏ lẻ."],"optionsImage":[null,null,null,null],"correctAnswerIndex":1},{"type":"multiple-choice","question":"<strong></strong> Một hệ thống AI được thiết kế để nhận diện vật thể trong video giám sát an ninh. Hệ thống này thể hiện đặc trưng nào của AI?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Khả năng học hỏi.","Khả năng suy luận.","Khả năng nhận thức (thông qua thị giác máy tính).","Khả năng giải quyết vấn đề phức tạp."],"optionsImage":[null,null,null,null],"correctAnswerIndex":2},{"type":"multiple-choice","question":"<strong></strong> Ứng dụng AI trong giáo dục có thể giúp giáo viên làm gì?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Tự động chấm điểm, phân tích hiệu suất học tập và cá nhân hóa nội dung học tập.","Thay thế hoàn toàn vai trò của giáo viên.","Chỉ để giải trí cho học sinh trong lớp.","Chỉ giúp học sinh làm bài tập về nhà."],"optionsImage":[null,null,null,null],"correctAnswerIndex":0},{"type":"multiple-choice","question":"<strong></strong> Tại sao 'quyền riêng tư' là một trong những cảnh báo lớn nhất về sự phát triển của AI?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["AI không thể bảo vệ dữ liệu cá nhân.","AI luôn yêu cầu quyền truy cập vào tất cả dữ liệu.","Mọi người không muốn AI biết thông tin của họ.","AI thu thập và xử lí lượng lớn dữ liệu cá nhân, tiềm ẩn nguy cơ xâm phạm quyền riêng tư và lạm dụng thông tin."],"optionsImage":[null,null,null,null],"correctAnswerIndex":3},{"type":"multiple-choice","question":"<strong></strong> Trong sản xuất, việc sử dụng AI để kiểm tra chất lượng sản phẩm một cách tự động có thể mang lại lợi ích gì?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Tăng số lượng sản phẩm lỗi.","Tăng cường độ chính xác, giảm thiểu sai sót của con người và tăng tốc độ kiểm tra.","Làm chậm quá trình sản xuất.","Chỉ áp dụng cho các sản phẩm đơn giản."],"optionsImage":[null,null,null,null],"correctAnswerIndex":1},{"type":"multiple-choice","question":"<strong></strong> Một công ty muốn xây dựng một chatbot có khả năng trả lời các câu hỏi phức tạp của khách hàng về sản phẩm của mình. Khả năng nào của AI là cốt lõi cho ứng dụng này?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Thị giác máy tính.","Học tăng cường.","Nhận dạng khuôn mặt.","Xử lí ngôn ngữ tự nhiên (NLP)."],"optionsImage":[null,null,null,null],"correctAnswerIndex":3},{"type":"multiple-choice","question":"<strong></strong> Hệ thống khuyến nghị phim trên Netflix là một ví dụ điển hình của ứng dụng AI nào?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Hệ thống khuyến nghị.","Hệ chuyên gia.","Robot.","Dịch tự động."],"optionsImage":[null,null,null,null],"correctAnswerIndex":0},{"type":"multiple-choice","question":"<strong></strong> Đặc điểm nào của AI giúp các hệ thống tự động nhận diện giọng nói và chuyển đổi thành văn bản?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Khả năng suy luận.","Khả năng xử lí ngôn ngữ tự nhiên.","Khả năng nhận thức không gian.","Khả năng học tăng cường."],"optionsImage":[null,null,null,null],"correctAnswerIndex":1},{"type":"multiple-choice","question":"<strong></strong> Tại sao AI lại được kỳ vọng sẽ làm thay đổi mạnh mẽ lĩnh vực y học?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Vì AI có thể thay thế tất cả bác sĩ.","Vì AI chỉ giúp bệnh viện tiết kiệm chi phí.","Vì AI có thể làm cho con người sống mãi mãi.","Vì khả năng phân tích dữ liệu lớn, hỗ trợ chẩn đoán chính xác, phát triển thuốc và cá nhân hóa liệu trình điều trị."],"optionsImage":[null,null,null,null],"correctAnswerIndex":3},{"type":"multiple-choice","question":"<strong></strong> Một trong những mối lo ngại lớn nhất về đạo đức khi AI phát triển là gì?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Vấn đề trách nhiệm giải trình khi AI đưa ra các quyết định quan trọng mà không có sự can thiệp của con người.","AI sẽ làm việc kém hiệu quả hơn con người.","AI không thể hiểu được cảm xúc của con người.","AI sẽ làm cho máy tính trở nên chậm chạp hơn."],"optionsImage":[null,null,null,null],"correctAnswerIndex":0},{"type":"multiple-choice","question":"<strong></strong> Hệ thống quản lí giao thông thông minh sử dụng AI để làm gì?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Chỉ điều khiển phương tiện công cộng.","Tối ưu hóa luồng giao thông, dự đoán tắc nghẽn và điều khiển đèn tín hiệu giao thông.","Thay thế hoàn toàn cảnh sát giao thông.","Chỉ thu thập dữ liệu về số lượng xe."],"optionsImage":[null,null,null,null],"correctAnswerIndex":1},{"type":"multiple-choice","question":"<strong></strong> Để một hệ thống AI có thể 'suy luận' và đưa ra quyết định, nó cần phải có khả năng gì?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Chỉ ghi nhớ thông tin.","Chỉ thực hiện các phép tính cơ bản.","Phân tích thông tin, nhận diện các mẫu và áp dụng các quy tắc để đưa ra kết luận.","Chỉ sao chép hành vi của con người."],"optionsImage":[null,null,null,null],"correctAnswerIndex":2},{"type":"multiple-choice","question":"<strong></strong> Trợ lí ảo trên điện thoại thông minh hoạt động hiệu quả nhờ khả năng nào của AI?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Xử lí ngôn ngữ tự nhiên và học hỏi.","Chỉ nhận diện khuôn mặt.","Chỉ phát nhạc.","Chỉ thực hiện các tác vụ đơn giản được lập trình sẵn."],"optionsImage":[null,null,null,null],"correctAnswerIndex":0},{"type":"multiple-choice","question":"<strong></strong> Ngành tài chính sử dụng AI để:","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["In tiền giấy.","Giảm lãi suất cho vay.","Chỉ quản lí tài khoản cá nhân.","Phát hiện gian lận, quản lí rủi ro và dự đoán xu hướng thị trường."],"optionsImage":[null,null,null,null],"correctAnswerIndex":3},{"type":"multiple-choice","question":"<strong></strong> Cảnh báo về 'áp lực thất nghiệp' do AI gây ra có ý nghĩa gì?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["AI có thể thay thế nhiều công việc mà con người đang thực hiện, dẫn đến tình trạng thất nghiệp.","AI không thể tạo ra công việc mới.","Con người sẽ không muốn làm việc nếu có AI.","AI sẽ làm việc kém hiệu quả hơn con người."],"optionsImage":[null,null,null,null],"correctAnswerIndex":0},{"type":"multiple-choice","question":"<strong></strong> Một công ty muốn sử dụng AI để phân tích dữ liệu khách hàng nhằm cải thiện chiến dịch marketing. Điều này có thể thuộc về ứng dụng AI nào?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Robot.","Hệ thống dịch thuật.","Hệ thống khuyến nghị và cá nhân hóa.","Xe tự lái."],"optionsImage":[null,null,null,null],"correctAnswerIndex":2},{"type":"multiple-choice","question":"<strong></strong> Lĩnh vực nào đang ứng dụng AI để phân tích các mô hình tội phạm và dự đoán các khu vực có nguy cơ cao?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Y học.","An ninh và thực thi pháp luật.","Giáo dục.","Giải trí."],"optionsImage":[null,null,null,null],"correctAnswerIndex":1},{"type":"multiple-choice","question":"<strong></strong> Điều gì là thách thức lớn nhất trong việc phát triển các hệ thống AI 'hiểu ngôn ngữ tự nhiên' một cách hoàn hảo?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Thiếu dữ liệu văn bản.","Máy tính không đủ nhanh.","Khó khăn trong việc tìm kiếm lập trình viên.","Sự phức tạp của ngữ cảnh, sắc thái, từ đa nghĩa và ngữ pháp trong ngôn ngữ con người."],"optionsImage":[null,null,null,null],"correctAnswerIndex":3},{"type":"multiple-choice","question":"<strong></strong> Khi AI được sử dụng để điều khiển robot thực hiện các nhiệm vụ lắp ráp phức tạp trong nhà máy, nó thể hiện đặc trưng nào?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Khả năng giải quyết vấn đề và tương tác với môi trường vật lí.","Khả năng nhận thức cảm xúc.","Khả năng sáng tạo nghệ thuật.","Khả năng dự đoán thời tiết."],"optionsImage":[null,null,null,null],"correctAnswerIndex":0},{"type":"multiple-choice","question":"<strong></strong> Hệ thống nào của AI có thể học hỏi từ hành vi người dùng để đưa ra gợi ý sản phẩm hoặc nội dung phù hợp?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Hệ chuyên gia.","Hệ thống khuyến nghị.","Dịch tự động.","Robot công nghiệp."],"optionsImage":[null,null,null,null],"correctAnswerIndex":1},{"type":"multiple-choice","question":"<strong></strong> Tại sao việc có 'dữ liệu lớn' lại quan trọng đối với sự phát triển của Trí tuệ nhân tạo hiện nay?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Vì AI không thể hoạt động nếu không có dữ liệu.","Vì dữ liệu lớn làm cho máy tính chạy nhanh hơn.","Vì dữ liệu lớn cung cấp đủ thông tin để AI học hỏi, nhận diện mẫu và đưa ra quyết định chính xác.","Vì dữ liệu lớn là nơi lưu trữ các thuật toán AI."],"optionsImage":[null,null,null,null],"correctAnswerIndex":2},{"type":"multiple-choice","question":"<strong></strong> Một công ty phát triển AI để dự đoán các cuộc tấn công mạng trước khi chúng xảy ra. Ứng dụng này thuộc lĩnh vực nào?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["An ninh mạng.","Y học.","Giáo dục.","Nông nghiệp."],"optionsImage":[null,null,null,null],"correctAnswerIndex":0},{"type":"multiple-choice","question":"<strong></strong> Khả năng nào của AI giúp xe tự lái nhận biết các vật cản, biển báo và người đi bộ trên đường?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Xử lí ngôn ngữ tự nhiên.","Học tăng cường.","Suy luận logic.","Thị giác máy tính."],"optionsImage":[null,null,null,null],"correctAnswerIndex":3},{"type":"multiple-choice","question":"<strong></strong> Trong ngành giáo dục, AI có thể cá nhân hóa việc học bằng cách nào?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Cung cấp cùng một nội dung cho tất cả học sinh.","Điều chỉnh nội dung, tốc độ và phương pháp học tập phù hợp với từng học sinh dựa trên hiệu suất của họ.","Chỉ giúp học sinh làm bài kiểm tra.","Thay thế hoàn toàn sự tương tác giữa giáo viên và học sinh."],"optionsImage":[null,null,null,null],"correctAnswerIndex":1},{"type":"multiple-choice","question":"<strong></strong> Mối lo ngại về 'rủi ro an ninh' của AI thường liên quan đến:","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["AI sẽ chiếm đoạt tài khoản ngân hàng của bạn.","AI sẽ làm hỏng máy tính của bạn.","Khả năng AI bị tấn công mạng, hoặc được sử dụng để phát triển vũ khí tự động, gây nguy hiểm cho xã hội.","AI sẽ làm giảm hiệu suất làm việc của con người."],"optionsImage":[null,null,null,null],"correctAnswerIndex":2},{"type":"multiple-choice","question":"<strong></strong> Một công ty muốn dùng AI để tự động trả lời các câu hỏi thường gặp của khách hàng qua website. Ứng dụng AI nào phù hợp nhất?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Hệ thống nhận dạng khuôn mặt.","Chatbot thông minh.","Hệ thống xe tự lái.","Robot công nghiệp."],"optionsImage":[null,null,null,null],"correctAnswerIndex":1},{"type":"multiple-choice","question":"<strong></strong> Công nghệ AI nào giúp máy tính 'nhìn' và 'hiểu' được nội dung của hình ảnh và video?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Thị giác máy tính.","Xử lí ngôn ngữ tự nhiên.","Học tăng cường.","Robot học."],"optionsImage":[null,null,null,null],"correctAnswerIndex":0},{"type":"multiple-choice","question":"<strong></strong> Làm thế nào AI có thể giúp phát hiện các cuộc tấn công mạng hiệu quả hơn các phương pháp truyền thống?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Bằng cách làm chậm mạng Internet.","Bằng cách mã hóa tất cả dữ liệu.","Bằng cách phân tích các mẫu dữ liệu lớn để phát hiện các mối đe dọa và hành vi bất thường trong thời gian thực.","Bằng cách thay thế hoàn toàn con người trong giám sát an ninh mạng."],"optionsImage":[null,null,null,null],"correctAnswerIndex":2},{"type":"multiple-choice","question":"<strong></strong> Trong lĩnh vực sản xuất, việc sử dụng robot được điều khiển bởi AI để thực hiện các nhiệm vụ nguy hiểm là một lợi ích của AI về mặt nào?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Giảm chi phí sản xuất.","Tăng tốc độ sản xuất.","Cải thiện chất lượng sản phẩm.","Đảm bảo an toàn lao động và giảm thiểu rủi ro cho con người."],"optionsImage":[null,null,null,null],"correctAnswerIndex":3},{"type":"multiple-choice","question":"<strong></strong> Ứng dụng AI nào dưới đây có thể hỗ trợ các nhà thiết kế thời trang tạo ra các mẫu quần áo mới dựa trên xu hướng thị trường?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Hệ thống AI sáng tạo và thiết kế.","Robot may vá tự động.","Phần mềm kế toán.","Trợ lí ảo cá nhân."],"optionsImage":[null,null,null,null],"correctAnswerIndex":0},{"type":"multiple-choice","question":"<strong></strong> Một công ty logistic muốn sử dụng AI để tối ưu hóa lộ trình giao hàng cho đội xe của mình nhằm tiết kiệm chi phí và thời gian. Điều này thể hiện khả năng nào của AI?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Khả năng nhận diện giọng nói.","Khả năng giải quyết vấn đề và tối ưu hóa.","Khả năng sáng tạo nghệ thuật.","Khả năng nhận thức cảm xúc."],"optionsImage":[null,null,null,null],"correctAnswerIndex":1},{"type":"multiple-choice","question":"<strong></strong> Một hệ thống AI được phát triển để phân tích hàng ngàn bài báo khoa học nhằm tóm tắt các phát hiện quan trọng. Điều này thể hiện ứng dụng nào của AI?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Thị giác máy tính.","Hệ thống robot.","Hệ chuyên gia dựa trên quy tắc đơn giản.","Xử lí ngôn ngữ tự nhiên (NLP) và tóm tắt văn bản."],"optionsImage":[null,null,null,null],"correctAnswerIndex":3},{"type":"multiple-choice","question":"<strong></strong> Khi AI được sử dụng trong hệ thống chẩn đoán y tế, điều gì là lợi ích chính so với chẩn đoán thủ công của con người?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Tăng tốc độ và độ chính xác trong việc phân tích dữ liệu y tế, phát hiện các mẫu bệnh lí khó nhận biết.","Giảm chi phí y tế xuống 0.","Thay thế hoàn toàn các bác sĩ chuyên khoa.","Chỉ áp dụng cho các bệnh hiếm gặp."],"optionsImage":[null,null,null,null],"correctAnswerIndex":0},{"type":"multiple-choice","question":"<strong></strong> Mối lo ngại về 'thiên vị' (bias) trong AI có thể dẫn đến hậu quả gì trong xã hội?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["AI không thể đưa ra quyết định.","AI có thể đưa ra các quyết định phân biệt đối xử hoặc không công bằng đối với một số nhóm người nhất định.","AI sẽ làm cho mọi người trở nên thiên vị hơn.","AI chỉ hoạt động tốt với dữ liệu không có thiên vị."],"optionsImage":[null,null,null,null],"correctAnswerIndex":1},{"type":"multiple-choice","question":"<strong></strong> Trong ngành giao thông, AI đóng vai trò như thế nào trong việc phát triển xe tự lái?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Chỉ dùng để giải trí cho người ngồi trên xe.","Chỉ điều khiển cửa xe.","Chỉ cung cấp thông tin về thời tiết.","Là bộ não điều khiển xe, giúp xe nhận diện môi trường, ra quyết định và lái xe an toàn."],"optionsImage":[null,null,null,null],"correctAnswerIndex":3},{"type":"multiple-choice","question":"<strong></strong> Hệ thống AI được thiết kế để dự đoán thời tiết có khả năng gì?","main_question":null,"questionImage":null,"mappedType":"multiple-choice","options":["Thay đổi thời tiết theo ý muốn.","Phân tích dữ liệu khí tượng để dự đoán các hiện tượng thời tiết với độ chính xác cao.","Chỉ báo cáo nhiệt độ hiện tại.","Làm cho thời tiết luôn đẹp."],"optionsImage":[null,null,null,null],"correctAnswerIndex":1},{"type":"true-false","question":null,"main_question":"<strong></strong> Một công ty công nghệ muốn phát triển một hệ thống AI để tự động hóa quy trình tuyển dụng, từ việc sàng lọc hồ sơ đến phỏng vấn sơ bộ. Hãy đánh giá các nhận định sau về hệ thống này:","questionImage":null,"mappedType":"true-false","statements":[{"statement":"Hệ thống AI này chắc chắn sẽ loại bỏ hoàn toàn yếu tố thiên vị trong tuyển dụng.","is_correct":false},{"statement":"Việc sử dụng AI trong tuyển dụng có thể giúp tăng hiệu quả và giảm thời gian xử lí hồ sơ.","is_correct":true},{"statement":"Dữ liệu đào tạo không phù hợp hoặc chứa định kiến có thể khiến AI đưa ra quyết định phân biệt đối xử. ","is_correct":true},{"statement":"Việc AI tự động phỏng vấn sơ bộ sẽ không bao giờ đặt ra vấn đề về quyền riêng tư của ứng viên. ","is_correct":false}]},{"type":"true-false","question":null,"main_question":"<strong></strong> Trong bối cảnh một thành phố thông minh đang triển khai hệ thống giao thông được quản lí hoàn toàn bằng AI để tối ưu hóa luồng xe cộ. Hãy đánh giá các nhận định sau:","questionImage":null,"mappedType":"true-false","statements":[{"statement":"Hệ thống AI này có thể dự đoán và điều chỉnh đèn tín hiệu giao thông dựa trên tình hình thực tế, giảm tắc nghẽn.","is_correct":true},{"statement":"Nếu hệ thống AI bị lỗi, nó có thể gây ra sự hỗn loạn giao thông trên diện rộng và gia tăng tai nạn. ","is_correct":true},{"statement":"Hệ thống AI quản lí giao thông không cần phải thu thập dữ liệu về vị trí và tốc độ di chuyển của phương tiện. ","is_correct":false},{"statement":"Việc sử dụng AI sẽ loại bỏ hoàn toàn nhu cầu về cảnh sát giao thông. ","is_correct":false}]},{"type":"true-false","question":null,"main_question":"<strong></strong> Giả sử một trường học áp dụng AI để cá nhân hóa lộ trình học tập cho từng học sinh, dựa trên năng lực và tốc độ tiếp thu của các em. Hãy đánh giá các nhận định sau:","questionImage":null,"mappedType":"true-false","statements":[{"statement":"AI có thể cung cấp nội dung và bài tập phù hợp với trình độ của từng học sinh, giúp các em học hiệu quả hơn. ","is_correct":true},{"statement":"Việc cá nhân hóa bằng AI sẽ loại bỏ hoàn toàn vai trò của giáo viên trong việc hướng dẫn và truyền cảm hứng. ","is_correct":false},{"statement":"Hệ thống AI này cần một lượng lớn dữ liệu về quá trình học tập của học sinh để hoạt động hiệu quả. ","is_correct":true},{"statement":"Áp dụng AI trong giáo dục không đặt ra bất kỳ vấn đề nào về quyền riêng tư dữ liệu của học sinh. ","is_correct":false}]},{"type":"true-false","question":null,"main_question":"<strong></strong> Một viện nghiên cứu y học đang sử dụng AI để phân tích dữ liệu gene và hồ sơ bệnh án của hàng triệu bệnh nhân nhằm phát triển phương pháp điều trị ung thư mới. Hãy đánh giá các nhận định sau:","questionImage":null,"mappedType":"true-false","statements":[{"statement":"AI có thể phát hiện các mẫu phức tạp trong dữ liệu gene mà mắt thường khó nhận ra, từ đó đẩy nhanh quá trình nghiên cứu thuốc.","is_correct":true},{"statement":"Việc AI xử lí dữ liệu sức khỏe nhạy cảm như thông tin gene sẽ không gây ra bất kỳ lo ngại nào về quyền riêng tư. ","is_correct":false},{"statement":"AI có thể thay thế hoàn toàn các nhà khoa học trong việc đưa ra các giả thuyết và thiết kế thí nghiệm. ","is_correct":false},{"statement":"Độ chính xác của AI trong việc phân tích dữ liệu gene phụ thuộc rất lớn vào chất lượng và sự đa dạng của dữ liệu đầu vào. ","is_correct":true}]},{"type":"true-false","question":null,"main_question":"<strong></strong> Một công ty tài chính lớn đang cân nhắc triển khai hệ thống AI để tự động phê duyệt các khoản vay nhỏ. Hãy đánh giá các nhận định sau:","questionImage":null,"mappedType":"true-false","statements":[{"statement":"Hệ thống AI có thể xử lí số lượng lớn hồ sơ vay nhanh hơn con người, tăng hiệu quả hoạt động. ","is_correct":true},{"statement":"AI có thể đưa ra quyết định thiên vị nếu dữ liệu đào tạo phản ánh các định kiến xã hội hiện có. ","is_correct":true},{"statement":"Việc từ chối một khoản vay bởi AI sẽ không cần bất kỳ sự giải thích nào cho khách hàng. ","is_correct":false},{"statement":"Hệ thống AI này sẽ loại bỏ hoàn toàn rủi ro gian lận trong các khoản vay. ","is_correct":false}]},{"type":"true-false","question":null,"main_question":"<strong></strong> Một nhà sản xuất ô tô đang phát triển một mẫu xe tự lái cấp độ 5 (hoàn toàn tự động). Hãy đánh giá các nhận định sau về công nghệ này:","questionImage":null,"mappedType":"true-false","statements":[{"statement":"Xe tự lái cấp độ 5 có thể hoạt động trong mọi điều kiện đường sá và thời tiết mà không cần sự can thiệp của con người. ","is_correct":true},{"statement":"Mặc dù có AI, xe tự lái vẫn sẽ hoàn toàn không gây ra bất kỳ tai nạn nào. ","is_correct":false},{"statement":"Công nghệ này sẽ không gây ra bất kỳ vấn đề đạo đức hay pháp lí nào liên quan đến trách nhiệm khi xảy ra tai nạn. ","is_correct":false},{"statement":"Sự phát triển của xe tự lái đòi hỏi sự kết hợp phức tạp của các công nghệ AI như thị giác máy tính, cảm biến và học máy.","is_correct":true}]},{"type":"true-false","main_question":"Một tập đoàn công nghệ hàng đầu đang nghiên cứu phát triển máy tính lượng tử nhằm giải quyết các bài toán phức tạp mà máy tính cổ điển không thể xử lý. Hãy đánh giá các nhận định sau về triển vọng và thách thức của điện toán lượng tử:","questionImage":null,"mappedType":"true-false","statements":[{"statement":"Điện toán lượng tử có khả năng phá vỡ các hệ thống mã hóa bảo mật hiện tại, đặt ra thách thức lớn về an ninh mạng.","is_correct":true},{"statement":"Máy tính lượng tử hiện nay đã đủ ổn định và có thể hoạt động hiệu quả trong môi trường thương mại mà không cần điều kiện kiểm soát đặc biệt.","is_correct":false},{"statement":"Việc chế tạo máy tính lượng tử đòi hỏi phải kiểm soát chính xác các trạng thái lượng tử của các hạt hạ nguyên tử trong môi trường cực lạnh hoặc chân không.","is_correct":true},{"statement":"Điện toán lượng tử đã trở thành công nghệ tiêu chuẩn và được ứng dụng rộng rãi trong hầu hết các thiết bị điện tử hàng ngày.","is_correct":false}]},{"type":"true-false","question":null,"main_question":"<strong></strong> Chính phủ một quốc gia đang nghiên cứu việc sử dụng AI để điều hành các hệ thống cơ sở hạ tầng quan trọng như mạng lưới điện và hệ thống cấp nước. Hãy đánh giá các nhận định sau:","questionImage":null,"mappedType":"true-false","statements":[{"statement":"AI có thể tối ưu hóa hiệu quả hoạt động và phản ứng nhanh với các sự cố trong các hệ thống này. ","is_correct":true},{"statement":"Nếu hệ thống AI bị tấn công hoặc trục trặc, nó có thể gây ra những hậu quả nghiêm trọng và trên diện rộng cho xã hội. ","is_correct":true},{"statement":"Việc ủy thác hoàn toàn quyền kiểm soát cho AI sẽ không tạo ra bất kỳ mối lo ngại nào về an ninh quốc gia.","is_correct":false},{"statement":"AI trong các hệ thống cơ sở hạ tầng không cần được lập trình để xử lí các tình huống khẩn cấp hoặc bất ngờ. ","is_correct":false}]},{"type":"true-false","question":null,"main_question":"<strong></strong> Một nền tảng mạng xã hội đang sử dụng AI để kiểm duyệt nội dung, tự động xóa các bài đăng vi phạm chính sách (ví dụ: bạo lực, thù địch). Hãy đánh giá các nhận định sau:","questionImage":null,"mappedType":"true-false","statements":[{"statement":"AI có thể xử lí một lượng lớn nội dung nhanh chóng, giúp giảm thiểu sự xuất hiện của nội dung độc hại. ","is_correct":true},{"statement":"Quyết định của AI có thể không hoàn toàn chính xác và có thể xóa nhầm nội dung hợp lệ hoặc bỏ sót nội dung vi phạm.","is_correct":true},{"statement":"Việc kiểm duyệt bằng AI sẽ không bao giờ gây ra tranh cãi về quyền tự do ngôn luận. ","is_correct":false},{"statement":"Hệ thống AI kiểm duyệt nội dung không cần sự giám sát của con người sau khi được triển khai. ","is_correct":false}]},{"type":"true-false","question":null,"main_question":"<strong></strong> Một công ty phát triển game đang sử dụng AI để tạo ra các nhân vật NPC (Non-Player Character) có hành vi thông minh và thích nghi với người chơi. Hãy đánh giá các nhận định sau:","questionImage":null,"mappedType":"true-false","statements":[{"statement":"AI giúp các NPC trong game có thể học hỏi từ hành vi của người chơi để đưa ra các phản ứng và chiến lược phức tạp hơn. ","is_correct":true},{"statement":"Việc tạo ra NPC thông minh bằng AI sẽ làm cho các trò chơi trở nên dễ dàng hơn đối với người chơi. ","is_correct":false},{"statement":"Công nghệ AI này không liên quan đến khả năng 'học hỏi' của AI.","is_correct":false},{"statement":"Các NPC được điều khiển bởi AI có thể tạo ra trải nghiệm chơi game năng động và hấp dẫn hơn. ","is_correct":true}]}];
            const quizOptions = {"timeLimit":45,"retriesAllowed":1,"showAnswers":true,"showExplanation":true,"aiAssessment":true,"scoring":{"mc":7,"tf":3,"sa":0,"essay":0,"tfMethod":"progressive"}};
            const googleScriptUrl = "https://script.google.com/macros/s/AKfycbzAhhPPCUgw-uU55gOj87Tm16ugz8FuBlRwQ7sECOBiOWBC8n6SI2mt_mQblXdoCdje/exec";
            const correctExamCode = "LIBSZJ";
            const teacherApiKey = "AIzaSyDzpJyodrQYlL0_OmSq4k3snugEgphM6IE";
            let studentInfo = {};
            let isSubmitted = false;
            let timerInterval;
            let retriesLeft = quizOptions.retriesAllowed;
            let studentApiKey = "";
            let ai = null;

            let proctoringLog = {
                thoatManHinh: 0,
                saoChep: 0,
                dan: 0,
                suKien: []
            };

            const studentQuizContainer = document.getElementById('student-quiz-container');
            const submitBtn = document.getElementById('submit-quiz-btn');
            const resultContainer = document.getElementById('result-container');
            const postSubmitOptions = document.getElementById('post-submit-options');
            const retryBtn = document.getElementById('retry-quiz-btn');
            const loginModal = document.getElementById('login-modal');
            const studentInfoForm = document.getElementById('student-info-form');
            const timerDisplay = document.getElementById('timer-display');
            const retriesDisplay = document.getElementById('retries-display');
            function shuffleQuiz() {
                // Shuffle options/statements within each question first
                quizData.forEach(item => {
                    // Shuffle multiple-choice options and their corresponding images
                    if (item.mappedType === 'multiple-choice' && item.options && item.options.length > 0) {
                        const correctAnswerText = item.options[item.correctAnswerIndex];
                        let optionsWithImages = item.options.map((opt, index) => ({
                            text: opt,
                            image: (item.optionsImage && item.optionsImage[index]) ? item.optionsImage[index] : null
                        }));
                        // Fisher-Yates shuffle
                        for (let i = optionsWithImages.length - 1; i > 0; i--) {
                            const j = Math.floor(Math.random() * (i + 1));
                            [optionsWithImages[i], optionsWithImages[j]] = [optionsWithImages[j], optionsWithImages[i]];
                        }
                        // Update the item with shuffled data
                        item.options = optionsWithImages.map(opt => opt.text);
                        item.optionsImage = optionsWithImages.map(opt => opt.image);
                        item.correctAnswerIndex = item.options.indexOf(correctAnswerText);
                    }
                    // Shuffle true-false statements
                    if (item.mappedType === 'true-false' && item.statements && item.statements.length > 0) {
                         for (let i = item.statements.length - 1; i > 0; i--) {
                            const j = Math.floor(Math.random() * (i + 1));
                            [item.statements[i], item.statements[j]] = [item.statements[j], item.statements[i]];
                        }
                    }
                });
                // Then, group questions by type and shuffle within each group
                const grouped = quizData.reduce((acc, q) => {
                    const type = q.mappedType;
                    if (!acc[type]) {
                        acc[type] = [];
                    }
                    acc[type].push(q);
                    return acc;
                }, {});
                let shuffledQuizData = [];
                const partOrder = ['multiple-choice', 'true-false', 'short-answer', 'essay'];
                partOrder.forEach(partType => {
                    if (grouped[partType]) {
                        const partQuestions = grouped[partType];
                        for (let i = partQuestions.length - 1; i > 0; i--) {
                            const j = Math.floor(Math.random() * (i + 1));
                            [partQuestions[i], partQuestions[j]] = [partQuestions[j], partQuestions[i]];
                        }
                        shuffledQuizData = shuffledQuizData.concat(partQuestions);
                    }
                });
               
                quizData = shuffledQuizData;
            }
            // --- Timer Function ---
            function startTimer(duration, display) {
                let timer = duration, minutes, seconds;
                clearInterval(timerInterval); // Clear any existing timer
                if(duration <= 0) {
                     display.textContent = "∞";
                     return;
                }
                timerInterval = setInterval(function () {
                    minutes = parseInt(timer / 60, 10);
                    seconds = parseInt(timer % 60, 10);
                    minutes = minutes < 10 ? "0" + minutes : minutes;
                    seconds = seconds < 10 ? "0" + seconds : seconds;
                    display.textContent = minutes + ":" + seconds;
                    if (--timer < 0) {
                        clearInterval(timerInterval);
                        alert("Hết giờ làm bài!");
                        handleSubmit();
                    }
                }, 1000);
            }
            
            async function showExplanation(index, button) {
                const item = quizData[index];
                const questionCard = document.getElementById(`student-q-${index}`);
                const feedbackDiv = document.getElementById(`q-${index}-feedback`);
                if (!questionCard || !feedbackDiv) return;

                const existingExplanation = feedbackDiv.querySelector('.ai-explanation');
                if (existingExplanation) {
                    existingExplanation.remove();
                    button.innerHTML = `
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                        Xem giải thích
                    `;
                    return;
                }

                button.disabled = true;
                button.innerHTML = '<div class="loader mr-2"></div> Đang tải...';

                if (item.explanation) {
                    displayExplanation(item.explanation, feedbackDiv, button);
                    return;
                }

                if (!ai) {
                    alert("Tính năng giải thích yêu cầu API Key, nhưng chưa được cấu hình bởi giáo viên.");
                    button.disabled = false;
                    button.innerHTML = `
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                        Xem giải thích
                    `;
                    return;
                }

                const questionText = item.question || item.main_question;
                let prompt = `Bạn là một trợ lý giáo viên AI, am hiểu sâu sắc Chương trình GDPT 2018. Hãy cung cấp một lời giải chi tiết, từng bước một cho câu hỏi sau đây. Lời giải phải chính xác, dễ hiểu và phù hợp với phương pháp giảng dạy của chương trình học, TUYỆT ĐỐI KHÔNG sử dụng kiến thức của lớp cao hơn để giải thích.\n\n--- CÂU HỎI ---\n${questionText}\n\n`;
                if (item.mappedType === 'multiple-choice') {
                    prompt += `--- CÁC LỰA CHỌN ---\n${item.options.map((opt, i) => `${String.fromCharCode(65 + i)}. ${opt}`).join('\n')}\n\n`;
                    prompt += `--- ĐÁP ÁN ĐÚNG ---\n${String.fromCharCode(65 + item.correctAnswerIndex)}. ${item.options[item.correctAnswerIndex]}`;
                } else if (item.mappedType === 'true-false') {
                    prompt += `--- CÁC MỆNH ĐỀ & ĐÁP ÁN ---\n${item.statements.map(s => ` - ${s.statement} -> ${s.is_correct ? 'Đúng' : 'Sai'}`).join('\n')}`;
                } else {
                    prompt += `--- ĐÁP ÁN / GỢI Ý ---\n${item.answer}`;
                }
                prompt += `\n\n--- YÊU CẦU ---\nGiải thích rõ ràng tại sao đáp án lại đúng, từng bước một. Định dạng tất cả các công thức toán học bằng LaTeX.`;

                try {
                    const response = await ai.models.generateContent({ model: "gemini-2.5-flash", contents: prompt });
                    const explanationText = response.text.replace(/\n/g, '<br>');
                    item.explanation = explanationText; // Cache it
                    displayExplanation(explanationText, feedbackDiv, button);
                } catch (error) {
                    console.error("Lỗi khi tạo giải thích:", error);
                    feedbackDiv.insertAdjacentHTML('beforeend', '<div class="ai-explanation text-red-600">Lỗi: Không thể tạo giải thích.</div>');
                    button.disabled = false;
                    button.innerHTML = `
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                        Thử lại
                    `;
                }
            }

            function displayExplanation(explanationText, container, button) {
                container.insertAdjacentHTML('beforeend', `<div class="ai-explanation prose prose-sm">${explanationText}</div>`);
                if (window.MathJax) MathJax.typesetPromise([container]);
                button.disabled = false;
                button.innerHTML = `
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>
                    Ẩn giải thích
                `;
            }
           
            function renderStudentQuiz() {
                studentQuizContainer.innerHTML = '';
               
                const grouped = quizData.reduce((acc, q) => {
                    const type = q.mappedType;
                    if (!acc[type]) {
                        acc[type] = [];
                    }
                    acc[type].push(q);
                    return acc;
                }, {});
                const groupInfo = {
                    'multiple-choice': { title: 'PHẦN I. TRẮC NGHIỆM KHÁCH QUAN', subtitle: 'Chọn đáp án đúng nhất trong các lựa chọn sau.' },
                    'true-false': { title: 'PHẦN II. CÂU HỎI ĐÚNG - SAI', subtitle: 'Xác định tính đúng hoặc sai cho mỗi mệnh đề dưới đây.' },
                    'short-answer': { title: 'PHẦN III. CÂU HỎI TRẢ LỜI NGẮN', subtitle: 'Điền đáp án ngắn gọn vào phần trả lời.' },
                    'essay': { title: 'PHẦN IV. CÂU HỎI TỰ LUẬN', subtitle: 'Trình bày chi tiết bài giải của bạn.' }
                };
               
                let questionCounter = 0;
                const partOrder = ['multiple-choice', 'true-false', 'short-answer', 'essay'];
                partOrder.forEach(partType => {
                    const questions = grouped[partType];
                    if (!questions || questions.length === 0) return;
                   
                    let groupHTML = `<div class="group-container space-y-8 mb-12">`;
                    const info = groupInfo[partType];
                    groupHTML += `
                        <div class="group-header pb-3 border-b-2 border-slate-300 mb-6">
                            <h2 class="text-2xl font-bold text-slate-800">${info.title}</h2>
                            ${info.subtitle ? `<p class="text-md text-slate-600 italic mt-1">${info.subtitle}</p>` : ''}
                        </div>
                    `;
                    questions.forEach((item, localIndex) => {
                        const globalIndex = quizData.indexOf(item);
                        questionCounter++;
                        groupHTML += `<div class="question-card" id="student-q-${globalIndex}">`;
                        let questionText = (item.question || item.main_question || '').replace(/\n/g, '<br>');
                       
                        groupHTML += `<div class="flex items-start">
                                     <div class="flex-grow">
                                         <div class="flex items-center mb-2">
                                             <span class="font-bold text-lg mr-3 text-indigo-600">Câu ${questionCounter}:</span>
                                             <div id="q-${globalIndex}-feedback-icon"></div>
                                         </div>
                                         <div class="question-content mt-2 text-lg text-slate-700">${questionText}</div>
                                         ${item.questionImage ? `<img src="${item.questionImage}" class="mt-4 rounded-lg max-w-full md:max-w-md border shadow-sm">` : ''}
                                     </div>
                                 </div>`;
                       
                        groupHTML += `<div class="mt-6">`;
                        switch(item.mappedType) {
                            case 'multiple-choice':
                                groupHTML += `<div class="options-grid grid grid-cols-1 md:grid-cols-2 gap-4">`;
                                item.options.forEach((opt, i) => {
                                    groupHTML += `<label for="q${globalIndex}-opt${i}" id="q${globalIndex}-opt-label${i}" class="option-label flex items-start p-4 border-2 rounded-xl cursor-pointer hover:bg-indigo-50 hover:border-indigo-400">
                                                     <input type="radio" name="q${globalIndex}" id="q${globalIndex}-opt${i}" value="${i}" class="flex-shrink-0 mt-1 h-5 w-5 text-indigo-600 focus:ring-indigo-500 border-gray-300">
                                                     <div class="ml-3 flex-grow">
                                                         <span class="font-semibold text-slate-800">${String.fromCharCode(65 + i)}.</span>
                                                         <span class="option-content text-slate-700">${opt || ''}</span>
                                                         ${(item.optionsImage && item.optionsImage[i]) ? `<img src="${item.optionsImage[i]}" class="mt-2 rounded-lg max-w-xs border shadow-sm">` : ''}
                                                     </div>
                                                 </label>`;
                                });
                                groupHTML += `</div>`;
                                break;
                            case 'true-false':
                                 groupHTML += `<div class="space-y-4">`;
                                 item.statements.forEach((s, i) => {
                                     groupHTML += `<div class="statement-item border-t pt-4">
                                                  <p class="mb-3 text-slate-700">${String.fromCharCode(97 + i)}) ${s.statement || ''}</p>
                                                  <div class="flex gap-x-6">
                                                      <label class="flex items-center cursor-pointer"><input type="radio" name="q${globalIndex}-s${i}" value="true" class="mr-2 h-4 w-4"> Đúng</label>
                                                      <label class="flex items-center cursor-pointer"><input type="radio" name="q${globalIndex}-s${i}" value="false" class="mr-2 h-4 w-4"> Sai</label>
                                                  </div>
                                              </div>`;
                                 });
                                 groupHTML += `</div>`;
                                 break;
                            case 'short-answer':
                                groupHTML += `<input type="text" name="q${globalIndex}" class="mt-1 block w-full md:w-1/2 border border-slate-300 rounded-lg shadow-sm py-2.5 px-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" placeholder="Nhập đáp án của bạn...">`;
                                break;
                            case 'essay':
                                groupHTML += `<textarea name="q${globalIndex}" class="mt-1 block w-full border border-slate-300 rounded-lg shadow-sm py-2.5 px-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" rows="5" placeholder="Nhập câu trả lời tự luận của bạn..."></textarea>`;
                                break;
                        }
                        groupHTML += `</div><div id="q-${globalIndex}-feedback" class="mt-4"></div></div>`;
                    });
                    groupHTML += `</div>`;
                    studentQuizContainer.innerHTML += groupHTML;
                });
               
                if (window.MathJax && typeof window.MathJax.typesetPromise === 'function') {
                    MathJax.typesetPromise([studentQuizContainer]);
                }
            }
           
            async function generatePerformanceReview(allAnswersData) {
                const feedbackContainer = document.getElementById('ai-feedback-container');
                if (!feedbackContainer || !ai) return null;
                feedbackContainer.classList.remove('hidden');
                feedbackContainer.innerHTML = `
                    <div class="bg-white p-6 rounded-xl shadow-lg">
                        <h3 class="text-xl font-bold text-slate-800 mb-4">📝 Phân Tích & Gợi Ý Từ Trợ Lý AI</h3>
                        <div id="ai-feedback-loader" class="text-center py-6">
                            <svg class="animate-spin mx-auto h-10 w-10 text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                            </svg>
                            <p class="mt-3 text-slate-600">AI đang phân tích bài làm của bạn...</p>
                        </div>
                        <div id="ai-feedback-summary" class="hidden prose prose-sm max-w-none"></div>
                        <div id="ai-feedback-details" class="hidden mt-4 space-y-2"></div>
                    </div>
                `;
               
                const loader = document.getElementById('ai-feedback-loader');
                const summaryDiv = document.getElementById('ai-feedback-summary');
                const detailsDiv = document.getElementById('ai-feedback-details');
                const incorrectAnswers = allAnswersData.filter(a => !a.isCorrect);
                if (incorrectAnswers.length === 0) {
                    feedbackContainer.innerHTML = `
                        <div class="bg-white p-6 rounded-xl shadow-lg text-center">
                            <h3 class="text-xl font-bold text-green-600">🎉 Chúc mừng!</h3>
                            <p class="mt-2 text-slate-700">Bạn đã trả lời đúng tất cả các câu hỏi. Làm tốt lắm!</p>
                        </div>
                    `;
                    return { overallFeedback: { summary: "Xuất sắc! Học sinh đã đã trả lời đúng tất cả các câu hỏi." } };
                }
                const summaryPrompt = `Bạn là một trợ lý giáo viên, nói tiếng Việt. Dựa vào tóm tắt các câu trả lời sai của học sinh, hãy đưa ra một nhận xét tổng quan ngắn gọn (khoảng 3-4 câu) về năng lực của học sinh, bao gồm điểm mạnh (suy luận từ các câu làm đúng), điểm yếu (dựa trên các câu sai) và một vài gợi ý ôn tập chung. Lời văn phải khích lệ, rõ ràng.
                Tóm tắt lỗi sai:
                ${JSON.stringify(incorrectAnswers.map(a => ({ cau: a.questionNumber, loai: a.type, cauHoi: a.question.substring(0, 50) + '...' })), null, 2)}`;
                try {
                    const summaryResponse = await ai.models.generateContent({
                        model: "gemini-2.5-flash",
                        contents: summaryPrompt
                    });
                    summaryDiv.innerHTML = summaryResponse.text.replace(/\n/g, '<br>');
                    loader.classList.add('hidden');
                    summaryDiv.classList.remove('hidden');
                    detailsDiv.classList.remove('hidden'); 
                } catch (e) {
                    console.error("Lỗi khi lấy nhận xét tổng quan:", e);
                    summaryDiv.innerHTML = '<p class="text-red-600">Lỗi khi tạo nhận xét tổng quan.</p>';
                    loader.classList.add('hidden');
                    summaryDiv.classList.remove('hidden');
                }
               
                const summaryForSheet = summaryDiv.innerText.substring(0, 200) + "...";
                return { overallFeedback: { summary: summaryForSheet } };
            }
            async function handleSubmit() {
                if (isSubmitted) return;
                isSubmitted = true;
                clearInterval(timerInterval);
                
                document.querySelectorAll('input, textarea').forEach(input => input.disabled = true);
                submitBtn.classList.add('hidden');
                postSubmitOptions.classList.remove('hidden');
                if (retriesLeft > 0) {
                    retryBtn.classList.remove('hidden');
                } else {
                    retryBtn.classList.add('hidden');
                }

                const proctoringDataString = JSON.stringify(proctoringLog);

                let totalStudentScore = 0;
                let totalCorrectAnswers = 0;
                let allAnswersData = [];
                const questionCounts = quizData.reduce((acc, q) => {
                    const type = q.mappedType;
                    acc[type] = (acc[type] || 0) + 1;
                    return acc;
                }, {});
                
                quizData.forEach((item, index) => {
                    let questionNumber = index + 1;
                    let answerData = { questionNumber, type: item.type };
                    switch (item.mappedType) {
                        case 'multiple-choice':
                            const selectedOption = document.querySelector(`input[name="q${index}"]:checked`);
                            const isCorrectMC = selectedOption ? parseInt(selectedOption.value) === item.correctAnswerIndex : false;
                            if (isCorrectMC) {
                                totalCorrectAnswers++;
                                if (questionCounts['multiple-choice'] > 0) {
                                   totalStudentScore += quizOptions.scoring.mc / questionCounts['multiple-choice'];
                                }
                            }
                            answerData.question = item.question;
                            answerData.options = item.options;
                            answerData.yourAnswer = selectedOption ? String.fromCharCode(65 + parseInt(selectedOption.value)) : "Không trả lời";
                            answerData.correctAnswer = String.fromCharCode(65 + item.correctAnswerIndex);
                            answerData.isCorrect = isCorrectMC;
                            break;
                        case 'true-false':
                            let correctStatementsCount = 0;
                            let yourAnswerPattern = [];
                            let correctAnswerPattern = [];
                            let details = [];
                            item.statements.forEach((s, i) => {
                                const selectedTF = document.querySelector(`input[name="q${index}-s${i}"]:checked`);
                                const studentChoice = selectedTF ? selectedTF.value === 'true' : null;
                                const isStatementCorrect = studentChoice === s.is_correct;
                               
                                if (isStatementCorrect) correctStatementsCount++;
                               
                                yourAnswerPattern.push(studentChoice === null ? '?' : (studentChoice ? 'Đ' : 'S'));
                                correctAnswerPattern.push(s.is_correct ? 'Đ' : 'S');
                                details.push({ statement: s.statement, yourChoice: studentChoice === null ? 'Không trả lời' : (studentChoice ? 'Đúng' : 'Sai'), correctChoice: s.is_correct ? 'Đúng' : 'Sai', isCorrect: isStatementCorrect });
                            });
                            
                            let scorePerTfQuestion = 0;
                            if (questionCounts['true-false'] > 0) {
                                scorePerTfQuestion = quizOptions.scoring.tf / questionCounts['true-false'];
                            }
                            let questionPoints = 0;
                            if (quizOptions.scoring.tfMethod === 'progressive') {
                                const progressivePoints = { 0: 0, 1: 0.1, 2: 0.25, 3: 0.5, 4: 1.0 };
                                questionPoints = progressivePoints[correctStatementsCount] * scorePerTfQuestion;
                            } else { // even
                                questionPoints = (correctStatementsCount / 4) * scorePerTfQuestion;
                            }
                            totalStudentScore += questionPoints;

                            if(correctStatementsCount === 4) totalCorrectAnswers++;
                            answerData.question = item.main_question;
                            answerData.yourAnswer = yourAnswerPattern.join('-');
                            answerData.correctAnswer = correctAnswerPattern.join('-');
                            answerData.isCorrect = correctStatementsCount === 4;
                            answerData.details = details;
                            break;
                       
                        case 'short-answer':
                            const saInput = document.querySelector(`input[name="q${index}"]`);
                            const studentAnswerRaw = saInput ? (saInput.value ?? '').trim() : "";
                            const correctAnswerRaw = (item.answer ?? '').toString().trim().replace(/\$/g, '');
                            let isCorrectSA = false;
                            const studentAnswerNormalized = studentAnswerRaw.replace(',', '.');
                            const correctAnswerNormalized = correctAnswerRaw.replace(',', '.');
                            if (studentAnswerNormalized.toLowerCase() === correctAnswerNormalized.toLowerCase()) {
                                isCorrectSA = true;
                            }
                             if (isCorrectSA) {
                                totalCorrectAnswers++;
                                if (questionCounts['short-answer'] > 0) {
                                   totalStudentScore += quizOptions.scoring.sa / questionCounts['short-answer'];
                                }
                            }
                            answerData.question = item.question;
                            answerData.yourAnswer = studentAnswerRaw || "Không trả lời";
                            answerData.correctAnswer = correctAnswerRaw;
                            answerData.isCorrect = isCorrectSA;
                            break;
                           
                        case 'essay':
                             const essayInput = document.querySelector(`textarea[name="q${index}"]`);
                             answerData.question = item.question;
                             answerData.yourAnswer = essayInput.value || "Không trả lời";
                             answerData.correctAnswer = item.answer;
                             answerData.isCorrect = null; // Needs manual grading
                             break;
                    }
                    allAnswersData.push(answerData);
                });
                
                const finalScore = totalStudentScore;
                
                let competencyAssessment = "Giáo viên không yêu cầu AI phân tích bài làm.";
                if (quizOptions.aiAssessment) {
                    const feedbackData = await generatePerformanceReview(allAnswersData);
                    if (feedbackData && feedbackData.overallFeedback && feedbackData.overallFeedback.summary) {
                        competencyAssessment = feedbackData.overallFeedback.summary;
                    } else {
                        competencyAssessment = "Có lỗi xảy ra trong quá trình AI phân tích bài làm.";
                    }
                }
                
                if (quizOptions.showAnswers) {
                    const totalQuestions = quizData.length;
                    resultContainer.innerHTML = `<div class="bg-white p-6 rounded-xl shadow-lg text-center">
                        <h3 class="text-2xl font-bold text-slate-800">KẾT QUẢ BÀI LÀM</h3>
                        <p class="mt-4 text-lg">Số câu đúng hoàn toàn: <span class="font-bold text-green-600">${totalCorrectAnswers}/${totalQuestions}</span></p>
                        <p class="text-2xl mt-2">Điểm (thang 10): <span class="font-bold text-blue-600">${finalScore.toFixed(2)}</span></p>
                        ${questionCounts['essay'] > 0 ? `<p class="text-sm text-gray-600 italic mt-1">Lưu ý: Điểm trên chưa bao gồm ${quizOptions.scoring.essay} điểm của phần Tự luận.</p>` : ''}
                    </div>`;
                    resultContainer.classList.remove('hidden');

                    allAnswersData.forEach((ans, index) => {
                        const questionCard = document.getElementById(`student-q-${index}`);
                        const feedbackIconDiv = document.getElementById(`q-${index}-feedback-icon`);
                        const feedbackDiv = document.getElementById(`q-${index}-feedback`);
                        if (!questionCard || !feedbackIconDiv || !feedbackDiv) return;

                        const iconHTML = ans.isCorrect === true
                            ? '<svg class="feedback-icon text-green-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>'
                            : (ans.isCorrect === false ? '<svg class="feedback-icon text-red-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg>' : '');
                        feedbackIconDiv.innerHTML = iconHTML;

                        if (ans.type.includes('multiple-choice')) {
                            const studentChoice = ans.yourAnswer === "Không trả lời" ? -1 : ans.yourAnswer.charCodeAt(0) - 65;
                            const correctChoice = ans.correctAnswer.charCodeAt(0) - 65;
                            document.getElementById(`q-${index}-opt-label${correctChoice}`)?.classList.add('correct');
                            if (studentChoice !== -1 && studentChoice !== correctChoice) {
                                document.getElementById(`q-${index}-opt-label${studentChoice}`)?.classList.add('incorrect');
                            }
                        } else if (ans.type === 'true-false') {
                            const statementItems = questionCard.querySelectorAll('.statement-item');
                            ans.details.forEach((detail, i) => { if(statementItems[i]) { statementItems[i].classList.add(detail.isCorrect ? 'correct' : 'incorrect'); }});
                        }

                        if (quizOptions.showExplanation) {
                            feedbackDiv.innerHTML = `<button data-explain-index="${index}" class="explain-btn mt-4 flex items-center px-4 py-2 bg-blue-100 text-blue-800 text-sm font-semibold rounded-lg hover:bg-blue-200 transition-colors">
                                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                Xem giải thích
                            </button>`;
                        }
                    });
                    
                    document.querySelectorAll('.explain-btn').forEach(btn => {
                        btn.addEventListener('click', (e) => {
                            const button = e.currentTarget;
                            const index = parseInt(button.dataset.explainIndex, 10);
                            showExplanation(index, button);
                        });
                    });

                    if (window.MathJax) await window.MathJax.typesetPromise([studentQuizContainer]);
                } else {
                     resultContainer.innerHTML = `<div class="bg-white p-6 rounded-xl shadow-lg text-center"><h3 class="text-xl font-bold text-green-600">Nộp bài thành công!</h3><p class="mt-2 text-slate-700">Bạn đã hoàn thành bài làm. Kết quả sẽ được giáo viên công bố sau.</p></div>`;
                    resultContainer.classList.remove('hidden');
                }
                
                const formData = new FormData();
                formData.append('name', studentInfo.name);
                formData.append('class', studentInfo.class);
                formData.append('score', `${finalScore.toFixed(2)}/10`);
                formData.append('assessment', competencyAssessment);
                formData.append('timestamp', new Date().toLocaleString('vi-VN'));
                formData.append('examCode', correctExamCode);
                formData.append('monitoringLog', proctoringDataString);
                formData.append('answerDetails', JSON.stringify(allAnswersData));
               
                fetch(googleScriptUrl, { method: 'POST', body: formData})
                    .then(res => console.log("Successfully submitted to Google Sheet"))
                    .catch(err => console.error("Error submitting to Google Sheet:", err));
            }
           
            function startNewAttempt() {
                isSubmitted = false;
                proctoringLog = { thoatManHinh: 0, saoChep: 0, dan: 0, suKien: [] };
                const proctoringWidget = document.getElementById('proctoring-widget');
                if (proctoringWidget) {
                    proctoringWidget.classList.add('hidden');
                    document.getElementById('tab-switch-count').textContent = '0';
                    document.getElementById('copy-count').textContent = '0';
                    document.getElementById('paste-count').textContent = '0';
                }

                renderStudentQuiz();
                resultContainer.classList.add('hidden');
                document.getElementById('ai-feedback-container').classList.add('hidden');
                postSubmitOptions.classList.add('hidden');
                submitBtn.classList.remove('hidden');
                 if (quizOptions.timeLimit > 0) {
                    const timeInSeconds = quizOptions.timeLimit * 60;
                    startTimer(timeInSeconds, timerDisplay);
                }
                retriesLeft--;
                retriesDisplay.textContent = `Lượt làm lại còn: ${retriesLeft}`;
                window.scrollTo(0, 0);
            }
            studentInfoForm.addEventListener('submit', (e) => {
                e.preventDefault();
               
                const enteredCode = document.getElementById('exam-code').value.trim().toUpperCase();
                if (enteredCode !== correctExamCode) {
                    alert('Mã đề không chính xác. Vui lòng kiểm tra lại!');
                    return;
                }
               
                studentApiKey = teacherApiKey;
                if (!studentApiKey) {
                    console.warn('Cảnh báo: Giáo viên chưa cấu hình API Key. Các tính năng AI sẽ không hoạt động.');
                }
       
                try {
                    if (studentApiKey) {
                       ai = new GoogleGenAI({ apiKey: studentApiKey });
                    }
                } catch(e) {
                    console.error("Lỗi khởi tạo Gemini API với key của giáo viên.", e);
                    alert("Cảnh báo: API Key của giáo viên không hợp lệ. Vui lòng báo cho giáo viên. Các tính năng AI sẽ không hoạt động.");
                    ai = null;
                }
                shuffleQuiz();
               
                studentInfo.name = document.getElementById('student-name').value;
                studentInfo.class = document.getElementById('student-class').value;
                loginModal.classList.add('hidden');
                studentQuizContainer.classList.remove('hidden');
                submitBtn.classList.remove('hidden');
               
                if (quizOptions.timeLimit > 0) {
                    const timeInSeconds = quizOptions.timeLimit * 60;
                    startTimer(timeInSeconds, timerDisplay);
                } else {
                    timerDisplay.textContent = "Không giới hạn";
                }
                retriesDisplay.textContent = `Lượt làm lại còn: ${retriesLeft}`;
                renderStudentQuiz();

                const proctoringWidget = document.getElementById('proctoring-widget');
                const tabSwitchCountEl = document.getElementById('tab-switch-count');
                const copyCountEl = document.getElementById('copy-count');
                const pasteCountEl = document.getElementById('paste-count');

                function updateProctoringUI() {
                    if (proctoringLog.thoatManHinh > 0 || proctoringLog.saoChep > 0 || proctoringLog.dan > 0) {
                        proctoringWidget.classList.remove('hidden');
                    }
                    tabSwitchCountEl.textContent = proctoringLog.thoatManHinh;
                    copyCountEl.textContent = proctoringLog.saoChep;
                    pasteCountEl.textContent = proctoringLog.dan;
                }

                // Disable Right Click
                document.addEventListener('contextmenu', e => e.preventDefault());

                // Track Tab Switching
                document.addEventListener('visibilitychange', () => {
                    if (document.hidden && !isSubmitted) {
                        proctoringLog.thoatManHinh++;
                        proctoringLog.suKien.push({ loai: 'chuyen_tab', thoiGian: new Date().toISOString() });
                        updateProctoringUI();
                    }
                });

                // Track Copying
                document.addEventListener('copy', () => {
                    if (isSubmitted) return;
                    proctoringLog.saoChep++;
                    proctoringLog.suKien.push({ loai: 'sao_chep', thoiGian: new Date().toISOString() });
                    updateProctoringUI();
                });

                // Track Pasting
                document.addEventListener('paste', () => {
                    if (isSubmitted) return;
                    proctoringLog.dan++;
                    proctoringLog.suKien.push({ loai: 'dan', thoiGian: new Date().toISOString() });
                    updateProctoringUI();
                });
            });
            
            submitBtn.addEventListener('click', handleSubmit);
            retryBtn.addEventListener('click', () => {
                shuffleQuiz();
                startNewAttempt();
            });
        </script>
    </body>
    </html>
    