
    <!DOCTYPE html>
    <html lang="vi">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ƒê·ªÅ ki·ªÉm tra 15 ph√∫t</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;600;700&display=swap" rel="stylesheet">
        <script>
            window.MathJax = {
                tex: {
                    packages: {'[+]': ['ams']},
                    inlineMath: [['$', '$'], ['\\(', '\\)']],
                    displayMath: [['$$', '$$'], ['\\[', '\\]']]
                },
                chtml: {
                    fontCache: 'global',
                    linebreaks: {
                        automatic: true
                    }
                }
            };
        </script>
        <script type="text/javascript" id="MathJax-script" async
            src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
        </script>
        <style>
            body { font-family: 'Be Vietnam Pro', sans-serif; background-color: #f0f4f8; }
            .loader { border: 4px solid #f3f3f3; border-top: 4px solid #3b82f6; border-radius: 50%; width: 24px; height: 24px; animation: spin 1s linear infinite; }
            @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
            .question-card {
                background-color: white;
                border-radius: 1rem;
                padding: 1.5rem 2rem;
                box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
                border-left: 5px solid transparent;
                transition: all 0.3s ease;
            }
            .ai-explanation {
                background-color: #f0f9ff;
                color: #0c4a6e;
                padding: 1rem;
                border-radius: 0.75rem;
                font-size: 0.9rem;
                margin-top: 1rem;
                border-left: 4px solid #38bdf8;
            }
            .feedback-icon { width: 1.5rem; height: 1.5rem; }
            .option-label {
                transition: all 0.2s ease-in-out;
                border: 2px solid #e5e7eb;
            }
            .option-label:hover {
                border-color: #6366f1;
                background-color: #eef2ff;
            }
            .option-label.correct {
                border-color: #10b981 !important;
                background-color: #ecfdf5 !important;
                color: #065f46;
            }
            .option-label.incorrect {
                border-color: #ef4444 !important;
                background-color: #fef2f2 !important;
                color: #991b1b;
            }
            .statement-item.correct { background-color: #ecfdf5; border-color: #10b981; }
            .statement-item.incorrect { background-color: #fef2f2; border-color: #ef4444; }
            .prose { max-width: 100%; }
            .prose h1, .prose h2, .prose h3 { font-weight: 600; }
            .prose p { margin-top: 0.5em; margin-bottom: 0.5em; }
            .prose ul, .prose ol { margin-top: 1em; margin-bottom: 1em; padding-left: 1.5em; }
            .prose li > p { margin-top: 0; margin-bottom: 0; }
            .prose code { background-color: #e5e7eb; padding: 0.2em 0.4em; margin: 0; font-size: 85%; border-radius: 3px; }
            .prose pre { background-color: #e5e7eb; padding: 1em; border-radius: 0.5em; overflow-x: auto; }
            .prose pre code { background-color: transparent; padding: 0; }
            details[open] > summary .details-arrow {
                transform: rotate(180deg);
            }
        </style>
    </head>
    <body class="bg-slate-100 text-slate-800">
        <div id="login-modal" class="fixed inset-0 bg-gray-900 bg-opacity-60 backdrop-blur-sm flex items-center justify-center z-50 p-4">
            <div class="bg-white p-8 rounded-2xl shadow-2xl w-full max-w-md transform transition-all" style="animation: fadeIn 0.3s ease-out;">
                <h2 class="text-2xl font-bold mb-2 text-center text-slate-800">Th√¥ng Tin H·ªçc Sinh</h2>
                <p class="text-center text-slate-500 mb-6">Vui l√≤ng nh·∫≠p ƒë·ªÉ b·∫Øt ƒë·∫ßu l√†m b√†i.</p>
                <form id="student-info-form">
                    <div class="mb-4">
                        <label for="student-name" class="block text-sm font-medium text-slate-700 mb-1">H·ªç v√† t√™n</label>
                        <input type="text" id="student-name" required class="mt-1 block w-full block border border-slate-300 rounded-lg shadow-sm py-2.5 px-3 focus:border-indigo-500 focus:ring-indigo-500">
                    </div>
                    <div class="mb-4">
                        <label for="student-class" class="block text-sm font-medium text-slate-700 mb-1">L·ªõp</label>
                        <input type="text" id="student-class" required class="mt-1 block w-full border border-slate-300 rounded-lg shadow-sm py-2.5 px-3 focus:border-indigo-500 focus:ring-indigo-500">
                    </div>
                    <div class="mb-4">
                        <label for="exam-code" class="block text-sm font-medium text-slate-700 mb-1">M√£ ƒë·ªÅ</label>
                        <input type="text" id="exam-code" required class="mt-1 block w-full border border-slate-300 rounded-lg shadow-sm py-2.5 px-3 focus:border-indigo-500 focus:ring-indigo-500" placeholder="Nh·∫≠p m√£ ƒë·ªÅ gi√°o vi√™n cung c·∫•p">
                    </div>
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-slate-700 mb-1">Gi√°o vi√™n:</label>
                        <p class="mt-1 text-slate-800 bg-slate-100 p-2.5 rounded-lg">Ki·ªÅu ƒê√¨nh Tu·∫•n</p>
                    </div>
                    <button type="submit" class="w-full bg-indigo-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-transform transform hover:scale-105">B·∫Øt ƒë·∫ßu l√†m b√†i</button>
                </form>
            </div>
        </div>
        <div class="container mx-auto p-4 md:p-8 max-w-4xl">
            <header class="mb-10 p-8 rounded-xl bg-gradient-to-r from-blue-500 to-indigo-600 text-white shadow-lg">
                <div class="flex justify-between items-center flex-wrap gap-4">
                    <div>
                        <h1 class="text-4xl font-bold">ƒê·ªÅ ki·ªÉm tra 15 ph√∫t</h1>
                        <p class="text-lg text-blue-100 mt-2">H√£y ho√†n th√†nh c√°c c√¢u h·ªèi d∆∞·ªõi ƒë√¢y m·ªôt c√°ch t·ªët nh·∫•t!</p>
                        <p class="text-sm text-blue-200 mt-4">T√°c gi·∫£: Ki·ªÅu ƒê√¨nh Tu·∫•n</p>
                    </div>
                    <div id="timer-container" class="text-right">
                         <div id="timer-display" class="text-3xl font-bold tracking-wider bg-white/20 px-4 py-2 rounded-lg">--:--</div>
                         <div id="retries-display" class="text-sm mt-1 text-blue-200"></div>
                    </div>
                </div>
            </header>
            <main id="student-quiz-container" class="space-y-8 hidden">
                <!-- Questions will be rendered here by JS -->
            </main>
            <footer class="mt-10 text-center">
                <button id="submit-quiz-btn" class="bg-indigo-600 text-white py-3 px-12 rounded-full font-bold text-lg hover:bg-indigo-700 transition-all duration-300 shadow-lg hover:shadow-xl hidden transform hover:scale-105">N·ªôp B√†i</button>
                <div id="result-container" class="mt-6 hidden"></div>
                <div id="ai-feedback-container" class="mt-8 text-left hidden"></div>
                <div id="post-submit-options" class="hidden mt-6 flex flex-col sm:flex-row items-center justify-center gap-4">
                    <button id="retry-quiz-btn" class="w-full sm:w-auto bg-slate-600 text-white py-2.5 px-6 rounded-lg font-semibold hover:bg-slate-700 transition-transform transform hover:scale-105">L√†m L·∫°i ƒê·ªÅ N√†y</button>
                </div>
            </footer>
        </div>

        <div id="proctoring-widget" class="fixed bottom-4 right-4 bg-yellow-100 text-yellow-800 p-3 rounded-lg shadow-lg text-sm z-50 hidden border border-yellow-300" style="max-width: 200px;">
            <h4 class="font-bold mb-2 border-b border-yellow-300 pb-1 flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd" /></svg>
                Gi√°m s√°t
            </h4>
            <p>Tho√°t m√†n h√¨nh: <span id="tab-switch-count" class="font-bold">0</span></p>
            <p>Sao ch√©p: <span id="copy-count" class="font-bold">0</span></p>
            <p>D√°n: <span id="paste-count" class="font-bold">0</span></p>
        </div>

        <script type="module">
            import { GoogleGenAI, Type } from "https://esm.sh/@google/genai@^1.13.0";
            let quizData = [{"type":"multiple-choice","question":"Trong c√°c ho·∫°t ƒë·ªông sau ƒë√¢y, ho·∫°t ƒë·ªông n√†o KH√îNG c√≥ s·ª± h·ªó tr·ª£ tr·ª±c ti·∫øp t·ª´ thi·∫øt b·ªã s·ªë c√≥ g·∫Øn b·ªô x·ª≠ l√≠ th√¥ng tin?","questionImage":null,"mappedType":"multiple-choice","options":["Thanh to√°n h√≥a ƒë∆°n ti·ªÅn ƒëi·ªán t·∫°i ng√¢n h√†ng qua m√°y ATM.","T√¨m ki·∫øm th√¥ng tin v·ªÅ l·ªãch s·ª≠ Vi·ªát Nam tr√™n Internet.","Ghi ch√©p b√†i gi·∫£ng b·∫±ng b√∫t v√† s·ªï tay truy·ªÅn th·ªëng.","ƒê·∫∑t v√© xem phim tr·ª±c tuy·∫øn qua ·ª©ng d·ª•ng tr√™n ƒëi·ªán tho·∫°i th√¥ng minh."],"optionsImage":[],"correctAnswerIndex":2},{"type":"multiple-choice","question":"Kh·∫£ nƒÉng n·ªïi b·∫≠t n√†o c·ªßa m√°y t√≠nh gi√∫p √≠ch cho vi·ªác d·ª± b√°o th·ªùi ti·∫øt ho·∫∑c m√¥ ph·ªèng c√°c hi·ªán t∆∞·ª£ng v·∫≠t l√≠ ph·ª©c t·∫°p?","questionImage":null,"mappedType":"multiple-choice","options":["L∆∞u tr·ªØ d·ªØ li·ªáu v·ªõi dung l∆∞·ª£ng l·ªõn.","K·∫øt n·ªëi Internet to√†n c·∫ßu.","T·ªëc ƒë·ªô x·ª≠ l√≠ th√¥ng tin nhanh ch√≥ng v√† ch√≠nh x√°c.","Kh·∫£ nƒÉng thi·∫øt k·∫ø ƒë·ªì h·ªça chuy√™n nghi·ªáp."],"optionsImage":[],"correctAnswerIndex":2},{"type":"multiple-choice","question":"T√°c ƒë·ªông t√≠ch c·ª±c n√†o c·ªßa c√¥ng ngh·ªá th√¥ng tin ƒë√£ gi√∫p thu h·∫πp kho·∫£ng c√°ch ƒë·ªãa l√≠ v√† mang l·∫°i c∆° h·ªôi h·ªçc t·∫≠p cho nh·ªØng ng∆∞·ªùi ·ªü v√πng s√¢u, v√πng xa?","questionImage":null,"mappedType":"multiple-choice","options":["TƒÉng c∆∞·ªùng giao l∆∞u vƒÉn h√≥a qua c√°c chuy·∫øn du l·ªãch.","Ph√°t tri·ªÉn c√°c h·ªá th·ªëng gi√°o d·ª•c tr·ª±c tuy·∫øn (e-learning).","C·∫£i thi·ªán ch·∫•t l∆∞·ª£ng s√°ch gi√°o khoa truy·ªÅn th·ªëng.","X√¢y d·ª±ng th√™m nhi·ªÅu tr∆∞·ªùng h·ªçc m·ªõi ·ªü n√¥ng th√¥n."],"optionsImage":[],"correctAnswerIndex":1},{"type":"true-false","main_question":"M·ªôt c·∫∑p v·ª£ ch·ªìng l·ªõn tu·ªïi mu·ªën mua m·ªôt chi·∫øc ƒëi·ªán tho·∫°i th√¥ng minh m·ªõi ph√π h·ª£p v·ªõi nhu c·∫ßu s·ª≠ d·ª•ng ƒë∆°n gi·∫£n c·ªßa h·ªç. H·ªç nh·ªù ch√°u m√¨nh t√¨m ki·∫øm th√¥ng tin v√† t∆∞ v·∫•n. Ch√°u c·ªßa h·ªç ƒë√£ thu th·∫≠p ƒë∆∞·ª£c c√°c th√¥ng tin sau t·ª´ nhi·ªÅu ngu·ªìn kh√°c nhau. H√£y ƒë√°nh gi√° c√°c m·ªánh ƒë·ªÅ d∆∞·ªõi ƒë√¢y v·ªÅ ch·∫•t l∆∞·ª£ng th√¥ng tin trong t√¨nh hu·ªëng n√†y.","questionImage":null,"mappedType":"true-false","statements":[{"statement":"T√≠nh ch√≠nh x√°c c·ªßa th√¥ng tin ƒë∆∞·ª£c th·ªÉ hi·ªán khi n·ªôi dung thu th·∫≠p ƒë∆∞·ª£c ph·∫£n √°nh ƒë√∫ng s·ª± th·∫≠t v·ªÅ s·∫£n ph·∫©m.","is_correct":true},{"statement":"N·∫øu ch√°u ch·ªâ t√¨m ki·∫øm c√°c b√†i ƒë√°nh gi√° v·ªÅ kh·∫£ nƒÉng ch∆°i game v√† hi·ªáu nƒÉng x·ª≠ l√≠ ƒë·ªì h·ªça c·ªßa c√°c m·∫´u ƒëi·ªán tho·∫°i, th√¨ th√¥ng tin ƒë√≥ v·∫´n c√≥ gi√° tr·ªã cao v·ªÅ t√≠nh ph√π h·ª£p cho vi·ªác t∆∞ v·∫•n ng∆∞·ªùi l·ªõn tu·ªïi, mi·ªÖn l√† c√°c b√†i ƒë√°nh gi√° ƒë√≥ m·ªõi ƒë∆∞·ª£c c·∫≠p nh·∫≠t.","is_correct":false},{"statement":"Ch√°u c·ªßa h·ªç ƒë·ªçc ƒë∆∞·ª£c m·ªôt b√†i vi·∫øt nƒÉm $2018$ ca ng·ª£i m·ªôt m·∫´u ƒëi·ªán tho·∫°i l√† c√≥ giao di·ªán c·ª±c k·ª≥ th√¢n thi·ªán v·ªõi ng∆∞·ªùi l·ªõn tu·ªïi. Vi·ªác s·ª≠ d·ª•ng th√¥ng tin n√†y ƒë·ªÉ t∆∞ v·∫•n hi·ªán t·∫°i c√≥ th·ªÉ d·∫´n ƒë·∫øn l·ª±a ch·ªçn kh√¥ng t·ªëi ∆∞u do thi·∫øu t√≠nh m·ªõi v√† t√≠nh ch√≠nh x√°c, b·ªüi c√°c c√¥ng ngh·ªá v√† giao di·ªán ƒë√£ thay ƒë·ªïi r·∫•t nhi·ªÅu.","is_correct":true},{"statement":"ƒê·ªÉ ƒë·∫£m b·∫£o t√≠nh ƒë·∫ßy ƒë·ªß v√† s·ª≠ d·ª•ng ƒë∆∞·ª£c c·ªßa th√¥ng tin cho vi·ªác t∆∞ v·∫•n, ch√°u c·ªßa h·ªç c·∫ßn thu th·∫≠p kh√¥ng ch·ªâ c√°c th√¥ng s·ªë kƒ© thu·∫≠t m√† c√≤n c√°c ƒë√°nh gi√° th·ª±c t·∫ø t·ª´ ng∆∞·ªùi d√πng c√≥ ƒë·ªô tu·ªïi t∆∞∆°ng t·ª±, c√°c th√¥ng tin v·ªÅ d·ªãch v·ª• h·ªó tr·ª£ kh√°ch h√†ng v√† ƒë·ªô b·ªÅn c·ªßa thi·∫øt b·ªã, ngay c·∫£ khi m·ªôt s·ªë th√¥ng tin n√†y kh√≥ t√¨m ki·∫øm ho·∫∑c c√≥ ngu·ªìn kh√¥ng ch√≠nh th·ªëng.","is_correct":true}]},{"type":"multiple-choice","question":"An ƒëang th·ª±c hi·ªán b√†i t·∫≠p nghi√™n c·ª©u v·ªÅ ·∫£nh h∆∞·ªüng c·ªßa m·∫°ng x√£ h·ªôi ƒë·∫øn t√¢m l√Ω v·ªã th√†nh ni√™n. An t√¨m th·∫•y m·ªôt b√†i vi·∫øt tr√™n m·ªôt di·ªÖn ƒë√†n tr·ª±c tuy·∫øn (forum) c·ªßa m·ªôt c√° nh√¢n v√¥ danh, kh√¥ng c√≥ tr√≠ch d·∫´n ngu·ªìn c·ª• th·ªÉ. Theo em, An n√™n l√†m g√¨ ƒë·ªÉ ƒë√°nh gi√° ch·∫•t l∆∞·ª£ng th√¥ng tin c·ªßa b√†i vi·∫øt n√†y tr∆∞·ªõc khi quy·∫øt ƒë·ªãnh s·ª≠ d·ª•ng?","questionImage":null,"mappedType":"multiple-choice","options":["Tin t∆∞·ªüng ho√†n to√†n v√¨ b√†i vi·∫øt th·ªÉ hi·ªán √Ω ki·∫øn c√° nh√¢n v√† c·∫£m x√∫c ch√¢n th·∫≠t.","T√¨m ki·∫øm c√°c ngu·ªìn th√¥ng tin kh√°c c√≥ uy t√≠n (nh∆∞ b√°o c√°o khoa h·ªçc, b√†i nghi√™n c·ª©u t·ª´ c√°c t·ªï ch·ª©c y t·∫ø, gi√°o d·ª•c) ƒë·ªÉ so s√°nh v√† ki·ªÉm ch·ª©ng.","Ch·ªâ s·ª≠ d·ª•ng nh·ªØng ph·∫ßn th√¥ng tin m√† An th·∫•y h·ª£p l√Ω v√† b·ªè qua c√°c ph·∫ßn kh√°c.","Sao ch√©p nguy√™n vƒÉn b√†i vi·∫øt v√¨ n√≥ ƒë√£ ƒë∆∞·ª£c ƒëƒÉng t·∫£i c√¥ng khai tr√™n internet."],"optionsImage":[],"correctAnswerIndex":1},{"type":"multiple-choice","question":"H·∫£i ƒëang t√¨m ki·∫øm th√¥ng tin v·ªÅ c√°ch ph√≤ng ch·ªëng d·ªãch b·ªánh hi·ªáu qu·∫£ cho m·ªôt d·ª± √°n h·ªçc t·∫≠p. H·∫£i truy c·∫≠p v√†o m·ªôt trang web c√≥ giao di·ªán ƒë∆°n gi·∫£n, kh√¥ng c√≥ th√¥ng tin v·ªÅ t√°c gi·∫£ hay t·ªï ch·ª©c ch·ªãu tr√°ch nhi·ªám, v√† b√†i vi·∫øt ƒë∆∞·ª£c ƒëƒÉng t·∫£i t·ª´ r·∫•t l√¢u m√† kh√¥ng c√≥ c·∫≠p nh·∫≠t. H·∫£i c·∫ßn ƒë·∫∑t c√¢u h·ªèi n√†o sau ƒë√¢y ƒë·ªÉ ƒë√°nh gi√° ƒë·ªô tin c·∫≠y c·ªßa th√¥ng tin tr√™n trang web ƒë√≥?","questionImage":null,"mappedType":"multiple-choice","options":["Trang web n√†y c√≥ ph·∫£i l√† trang web n·ªïi ti·∫øng kh√¥ng?","B√†i vi·∫øt c√≥ ƒë∆∞·ª£c tr√¨nh b√†y ƒë·∫πp m·∫Øt v√† d·ªÖ ƒë·ªçc kh√¥ng?","Th√¥ng tin tr√™n trang web n√†y c√≤n c·∫≠p nh·∫≠t kh√¥ng v√† ngu·ªìn g·ªëc c·ªßa n√≥ l√† t·ª´ ƒë√¢u?","S·ªë l∆∞·ª£ng l∆∞·ª£t xem v√† b√¨nh lu·∫≠n c·ªßa b√†i vi·∫øt c√≥ nhi·ªÅu kh√¥ng?"],"optionsImage":[],"correctAnswerIndex":2},{"type":"multiple-choice","question":"Lan c·∫ßn vi·∫øt m·ªôt b√†i lu·∫≠n v·ªÅ l·ª£i √≠ch c·ªßa vi·ªác ƒë·ªçc s√°ch. Lan t√¨m th·∫•y m·ªôt trang blog c√° nh√¢n chia s·∫ª nh·ªØng tr·∫£i nghi·ªám v√† c·∫£m nh·∫≠n v·ªÅ vi·ªác ƒë·ªçc s√°ch, v·ªõi r·∫•t nhi·ªÅu c·∫£m x√∫c t√≠ch c·ª±c. Tuy nhi√™n, blog kh√¥ng cung c·∫•p b·∫•t k·ª≥ s·ªë li·ªáu th·ªëng k√™ hay nghi√™n c·ª©u khoa h·ªçc n√†o. ƒê·ªÉ b√†i lu·∫≠n c·ªßa Lan mang t√≠nh thuy·∫øt ph·ª•c cao, Lan n√™n h√†nh ƒë·ªông nh∆∞ th·∫ø n√†o v·ªõi th√¥ng tin t·ª´ blog n√†y?","questionImage":null,"mappedType":"multiple-choice","options":["Ch·ªâ s·ª≠ d·ª•ng th√¥ng tin t·ª´ blog c√° nh√¢n n√†y v√¨ n√≥ r·∫•t g·∫ßn g≈©i v√† d·ªÖ hi·ªÉu.","S·ª≠ d·ª•ng th√¥ng tin t·ª´ blog nh∆∞ m·ªôt g√≥c nh√¨n c√° nh√¢n, ƒë·ªìng th·ªùi t√¨m ki·∫øm th√™m c√°c nghi√™n c·ª©u, th·ªëng k√™ t·ª´ c√°c ngu·ªìn ƒë√°ng tin c·∫≠y ƒë·ªÉ b·ªï sung v√† ch·ª©ng minh.","B·ªè qua ho√†n to√†n blog n√†y v√¨ n√≥ kh√¥ng c√≥ s·ªë li·ªáu khoa h·ªçc.","T√≥m t·∫Øt c√°c √Ω ch√≠nh t·ª´ blog v√† coi ƒë√≥ l√† c√°c b·∫±ng ch·ª©ng khoa h·ªçc cho b√†i lu·∫≠n."],"optionsImage":[],"correctAnswerIndex":1},{"type":"multiple-choice","question":"Trong gi·ªù h·ªçc Tin h·ªçc, c√¥ gi√°o y√™u c·∫ßu h·ªçc sinh t√¨m ki·∫øm th√¥ng tin v·ªÅ m·ªôt ch·ªß ƒë·ªÅ m√¥i tr∆∞·ªùng ph·ª©c t·∫°p. B√¨nh t√¨m ƒë∆∞·ª£c m·ªôt b√†i vi·∫øt tr√™n m·ªôt trang tin t·ª©c, nh∆∞ng b√†i vi·∫øt n√†y ch·ªâ ƒë∆∞a ra m·ªôt g√≥c nh√¨n duy nh·∫•t v√† s·ª≠ d·ª•ng nh·ªØng t·ª´ ng·ªØ mang t√≠nh c·∫£m x√∫c m·∫°nh. ƒê·ªÉ ƒë·∫£m b·∫£o th√¥ng tin s·ª≠ d·ª•ng l√† kh√°ch quan v√† to√†n di·ªán, B√¨nh c·∫ßn l√†m g√¨ ti·∫øp theo?","questionImage":null,"mappedType":"multiple-choice","options":["Tin t∆∞·ªüng v√†o b√†i vi·∫øt ƒë√≥ v√¨ n√≥ ƒë∆∞·ª£c ƒëƒÉng tr√™n m·ªôt trang tin t·ª©c.","T√¨m ki·∫øm c√°c b√†i vi·∫øt kh√°c t·ª´ c√°c ngu·ªìn tin ƒëa d·∫°ng (c∆° quan ch√≠nh ph·ªß, t·ªï ch·ª©c phi l·ª£i nhu·∫≠n, c√°c nh√† khoa h·ªçc, v.v.) v√† so s√°nh c√°c quan ƒëi·ªÉm.","Ch·ªâ ƒë·ªçc l∆∞·ªõt qua ƒë·ªÉ l·∫•y √Ω t∆∞·ªüng v√† kh√¥ng ƒëi s√¢u v√†o chi ti·∫øt.","Chia s·∫ª b√†i vi·∫øt ngay l·∫≠p t·ª©c tr√™n m·∫°ng x√£ h·ªôi ƒë·ªÉ m·ªçi ng∆∞·ªùi c√πng th·∫£o lu·∫≠n."],"optionsImage":[],"correctAnswerIndex":1},{"type":"multiple-choice","question":"Khi t√¨m ki·∫øm th√¥ng tin v·ªÅ \"l·ªãch s·ª≠ ph√°t tri·ªÉn c·ªßa m√°y t√≠nh\" ƒë·ªÉ l√†m b√†i thuy·∫øt tr√¨nh, b·∫°n Minh ƒë√£ truy c·∫≠p m·ªôt trang web c√≥ t√™n mi·ªÅn l·∫°, kh√¥ng r√µ ngu·ªìn g·ªëc. N·ªôi dung tr√™n trang web n√†y kh√¥ng c√≥ c√°c tham chi·∫øu ƒë·∫øn t√†i li·ªáu nghi√™n c·ª©u hay s√°ch l·ªãch s·ª≠ ƒë√°ng tin c·∫≠y, v√† c√≥ m·ªôt s·ªë l·ªói ch√≠nh t·∫£. Theo em, ƒëi·ªÅu n√†o sau ƒë√¢y l√† R·ª¶I RO L·ªöN NH·∫§T khi Minh quy·∫øt ƒë·ªãnh s·ª≠ d·ª•ng th√¥ng tin t·ª´ trang web n√†y cho b√†i thuy·∫øt tr√¨nh c·ªßa m√¨nh?","questionImage":null,"mappedType":"multiple-choice","options":["B√†i thuy·∫øt tr√¨nh s·∫Ω tr·ªü n√™n qu√° d√†i d√≤ng.","Minh s·∫Ω m·∫•t nhi·ªÅu th·ªùi gian ƒë·ªÉ trang tr√≠ slide.","B√†i thuy·∫øt tr√¨nh c√≥ th·ªÉ ch·ª©a th√¥ng tin sai l·ªách, thi·∫øu ch√≠nh x√°c, ·∫£nh h∆∞·ªüng ƒë·∫øn k·∫øt qu·∫£ h·ªçc t·∫≠p v√† hi·ªÉu bi·∫øt c·ªßa b·∫£n th√¢n v√† ng∆∞·ªùi nghe.","Minh s·∫Ω kh√¥ng th·ªÉ t√¨m th·∫•y h√¨nh ·∫£nh minh h·ªça ph√π h·ª£p."],"optionsImage":[],"correctAnswerIndex":2},{"type":"short-answer","question":"B·∫°n ƒë∆∞·ª£c giao nhi·ªám v·ª• t√¨m ki·∫øm th√¥ng tin cho m·ªôt b√†i thuy·∫øt tr√¨nh v·ªÅ \"·∫¢nh h∆∞·ªüng c·ªßa bi·∫øn ƒë·ªïi kh√≠ h·∫≠u ƒë·∫øn m·ª±c n∆∞·ªõc bi·ªÉn\". Trong qu√° tr√¨nh t√¨m ki·∫øm, b·∫°n t√¨m th·∫•y m·ªôt b√†i vi·∫øt tr√™n m·ªôt trang blog c√° nh√¢n c√≥ t√™n \"Quan ƒëi·ªÉm c·ªßa t√¥i v·ªÅ bi·ªÉn d√¢ng\" ƒë∆∞·ª£c xu·∫•t b·∫£n v√†o nƒÉm $2010$, kh√¥ng ghi r√µ t√°c gi·∫£ ho·∫∑c ngu·ªìn tham kh·∫£o. B·∫°n s·∫Ω ƒë√°nh gi√° ch·∫•t l∆∞·ª£ng c·ªßa th√¥ng tin trong b√†i vi·∫øt n√†y nh∆∞ th·∫ø n√†o d·ª±a tr√™n c√°c ti√™u ch√≠ v·ªÅ t√≠nh x√°c th·ª±c v√† ƒë·ªô tin c·∫≠y? N√™u r√µ l√≠ do.","questionImage":null,"mappedType":"short-answer","answer":"B√†i vi·∫øt n√†y c√≥ ch·∫•t l∆∞·ª£ng th√¥ng tin th·∫•p, kh√≥ tin c·∫≠y v√¨:\n1.  **T√≠nh x√°c th·ª±c:**\n    *   **Kh√¥ng r√µ t√°c gi·∫£:** Thi·∫øu th√¥ng tin v·ªÅ t√°c gi·∫£ khi·∫øn ng∆∞·ªùi ƒë·ªçc kh√¥ng th·ªÉ x√°c ƒë·ªãnh chuy√™n m√¥n ho·∫∑c uy t√≠n c·ªßa ng∆∞·ªùi vi·∫øt.\n    *   **Trang blog c√° nh√¢n:** ƒê√¢y kh√¥ng ph·∫£i l√† m·ªôt ngu·ªìn ch√≠nh th·ªëng, th∆∞·ªùng ch·ª©a √Ω ki·∫øn c√° nh√¢n ch·ª© kh√¥ng ph·∫£i th√¥ng tin ƒë∆∞·ª£c ki·ªÉm ch·ª©ng khoa h·ªçc.\n2.  **ƒê·ªô tin c·∫≠y:**\n    *   **Thi·∫øu ngu·ªìn tham kh·∫£o:** Kh√¥ng c√≥ tr√≠ch d·∫´n c√°c nghi√™n c·ª©u, b√°o c√°o khoa h·ªçc hay d·ªØ li·ªáu c·ª• th·ªÉ l√†m b·∫±ng ch·ª©ng.\n    *   **Ng√†y xu·∫•t b·∫£n c≈© ($2010$):** Th√¥ng tin v·ªÅ bi·∫øn ƒë·ªïi kh√≠ h·∫≠u li√™n t·ª•c ƒë∆∞·ª£c c·∫≠p nh·∫≠t. D·ªØ li·ªáu t·ª´ nƒÉm $2010$ c√≥ th·ªÉ ƒë√£ l·ªói th·ªùi v√† kh√¥ng ph·∫£n √°nh nh·ªØng ph√°t hi·ªán m·ªõi nh·∫•t."},{"type":"short-answer","question":"B·∫°n ƒëang t√¨m mua m·ªôt chi·∫øc ƒëi·ªán tho·∫°i th√¥ng minh m·ªõi cho nhu c·∫ßu h·ªçc t·∫≠p v√† gi·∫£i tr√≠. B·∫°n ƒë√£ t√¨m ƒë∆∞·ª£c th√¥ng tin tr√™n $3$ ngu·ªìn:\n1.  M·ªôt di·ªÖn ƒë√†n c√¥ng ngh·ªá l·ªõn v·ªõi nhi·ªÅu ƒë√°nh gi√° t·ª´ ng∆∞·ªùi d√πng.\n2.  Trang web ch√≠nh th·ª©c c·ªßa nh√† s·∫£n xu·∫•t ƒëi·ªán tho·∫°i.\n3.  M·ªôt b√†i vi·∫øt qu·∫£ng c√°o tr√™n m·∫°ng x√£ h·ªôi t·ª´ m·ªôt ng∆∞·ªùi b√°n h√†ng online.\nKhi t·ªïng h·ª£p th√¥ng tin t·ª´ $3$ ngu·ªìn tr√™n ƒë·ªÉ ƒë∆∞a ra quy·∫øt ƒë·ªãnh, b·∫°n s·∫Ω ∆∞u ti√™n th√¥ng tin t·ª´ ngu·ªìn n√†o nh·∫•t v√† v√¨ sao? B·∫°n s·∫Ω l√†m g√¨ ƒë·ªÉ ki·ªÉm ch·ª©ng th√¥ng tin t·ª´ c√°c ngu·ªìn kh√°c?","questionImage":null,"mappedType":"short-answer","answer":"1.  **∆Øu ti√™n ngu·ªìn th√¥ng tin:** T√¥i s·∫Ω ∆∞u ti√™n th√¥ng tin t·ª´ **trang web ch√≠nh th·ª©c c·ªßa nh√† s·∫£n xu·∫•t** v√† **di·ªÖn ƒë√†n c√¥ng ngh·ªá l·ªõn v·ªõi nhi·ªÅu ƒë√°nh gi√° t·ª´ ng∆∞·ªùi d√πng**.\n    *   **Trang web nh√† s·∫£n xu·∫•t:** Cung c·∫•p th√¥ng s·ªë k·ªπ thu·∫≠t ch√≠nh x√°c, ch√≠nh s√°ch b·∫£o h√†nh, v√† th√¥ng tin s·∫£n ph·∫©m ƒë√°ng tin c·∫≠y nh·∫•t.\n    *   **Di·ªÖn ƒë√†n c√¥ng ngh·ªá:** Cung c·∫•p tr·∫£i nghi·ªám th·ª±c t·∫ø, ∆∞u nh∆∞·ª£c ƒëi·ªÉm t·ª´ nhi·ªÅu ng∆∞·ªùi d√πng kh√°c nhau, mang t√≠nh kh√°ch quan h∆°n qu·∫£ng c√°o.\n2.  **Ki·ªÉm ch·ª©ng th√¥ng tin:**\n    *   **T·ª´ trang web nh√† s·∫£n xu·∫•t v√† di·ªÖn ƒë√†n:** So s√°nh c√°c th√¥ng s·ªë k·ªπ thu·∫≠t, t√≠nh nƒÉng v√† gi√° c·∫£ gi·ªØa c√°c m·∫´u ƒëi·ªán tho·∫°i. ƒê·ªçc nhi·ªÅu ƒë√°nh gi√° t·ª´ c√°c ng∆∞·ªùi d√πng kh√°c nhau ƒë·ªÉ c√≥ c√°i nh√¨n ƒëa chi·ªÅu.\n    *   **T·ª´ b√†i vi·∫øt qu·∫£ng c√°o tr√™n m·∫°ng x√£ h·ªôi:** R·∫•t √≠t tin c·∫≠y. T√¥i s·∫Ω ch·ªâ xem ƒë√≥ l√† th√¥ng tin tham kh·∫£o ban ƒë·∫ßu v·ªÅ s·∫£n ph·∫©m ho·∫∑c gi√° c·∫£. Sau ƒë√≥, t√¥i s·∫Ω ki·ªÉm tra l·∫°i to√†n b·ªô th√¥ng tin v·ªÅ s·∫£n ph·∫©m (th√¥ng s·ªë, gi√°, ch√≠nh s√°ch) tr√™n trang web ch√≠nh th·ª©c c·ªßa nh√† s·∫£n xu·∫•t ho·∫∑c c√°c c·ª≠a h√†ng uy t√≠n, ƒë·ªìng th·ªùi tham kh·∫£o c√°c ƒë√°nh gi√° ƒë·ªôc l·∫≠p t·ª´ di·ªÖn ƒë√†n ho·∫∑c c√°c trang review c√¥ng ngh·ªá uy t√≠n. ƒê·∫∑c bi·ªát, c·∫£nh gi√°c v·ªõi c√°c ∆∞u ƒë√£i qu√° t·ªët ho·∫∑c th√¥ng tin kh√¥ng r√µ r√†ng."},{"type":"multiple-choice","question":"An ƒëƒÉng t·∫£i m·ªôt b√†i vi·∫øt tr√™n m·∫°ng x√£ h·ªôi ch·ª©a th√¥ng tin sai s·ª± th·∫≠t v·ªÅ m·ªôt c·ª≠a h√†ng ƒÉn u·ªëng, g√¢y ·∫£nh h∆∞·ªüng nghi√™m tr·ªçng ƒë·∫øn uy t√≠n v√† doanh thu c·ªßa c·ª≠a h√†ng. H√†nh vi c·ªßa An thu·ªôc lo·∫°i t√°c ƒë·ªông ti√™u c·ª±c n√†o c·ªßa c√¥ng ngh·ªá s·ªë v√† c√≥ th·ªÉ ph·∫£i ch·ªãu tr√°ch nhi·ªám ph√°p l√≠ nh∆∞ th·∫ø n√†o?","questionImage":null,"mappedType":"multiple-choice","options":["T·∫•n c√¥ng m·∫°ng, g√¢y t·ªïn h·∫°i tr·ª±c ti·∫øp ƒë·∫øn h·ªá th·ªëng th√¥ng tin.","L·∫°m d·ª•ng th√¥ng tin c√° nh√¢n, vi ph·∫°m quy·ªÅn ri√™ng t∆∞ c·ªßa c·ª≠a h√†ng.","Lan truy·ªÅn th√¥ng tin sai l·ªách (tin gi·∫£), g√¢y thi·ªát h·∫°i kinh t·∫ø v√† uy t√≠n, c√≥ th·ªÉ b·ªã x·ª≠ ph·∫°t h√†nh ch√≠nh ho·∫∑c h√¨nh s·ª± theo quy ƒë·ªãnh v·ªÅ vu kh·ªëng, x√∫c ph·∫°m danh d·ª±.","Nghi·ªán Internet, ·∫£nh h∆∞·ªüng ƒë·∫øn s·ª©c kh·ªèe tinh th·∫ßn c·ªßa An.","An kh√¥ng vi ph·∫°m ph√°p lu·∫≠t v√¨ ƒë√≥ l√† quy·ªÅn t·ª± do ng√¥n lu·∫≠n."],"optionsImage":[],"correctAnswerIndex":2},{"type":"multiple-choice","question":"Minh s·ª≠ d·ª•ng m·ªôt ƒëo·∫°n nh·∫°c n·ªÅn t·ª´ m·ªôt b√†i h√°t n·ªïi ti·∫øng ƒë·ªÉ l√†m nh·∫°c hi·ªáu cho k√™nh YouTube c√° nh√¢n c·ªßa m√¨nh m√† kh√¥ng xin ph√©p t√°c gi·∫£ ho·∫∑c ƒë∆°n v·ªã gi·ªØ b·∫£n quy·ªÅn. Theo quy ƒë·ªãnh c·ªßa ph√°p lu·∫≠t Vi·ªát Nam v·ªÅ s·ªü h·ªØu tr√≠ tu·ªá, h√†nh ƒë·ªông n√†y c·ªßa Minh l√† g√¨?","questionImage":null,"mappedType":"multiple-choice","options":["Ho√†n to√†n h·ª£p ph√°p v√¨ Minh ch·ªâ s·ª≠ d·ª•ng cho m·ª•c ƒë√≠ch c√° nh√¢n.","Vi ph·∫°m b·∫£n quy·ªÅn, c√≥ th·ªÉ b·ªã y√™u c·∫ßu g·ª° b·ªè v√† b·ªìi th∆∞·ªùng thi·ªát h·∫°i.","Kh√¥ng vi ph·∫°m n·∫øu Minh kh√¥ng thu l·ª£i nhu·∫≠n t·ª´ k√™nh YouTube ƒë√≥.","Kh√¥ng vi ph·∫°m v√¨ Minh ƒë√£ thay ƒë·ªïi m·ªôt ph·∫ßn ƒëo·∫°n nh·∫°c.","Ch·ªâ vi ph·∫°m n·∫øu k√™nh YouTube c·ªßa Minh c√≥ h∆°n $10.000$ l∆∞·ª£t ƒëƒÉng k√Ω."],"optionsImage":[],"correctAnswerIndex":1},{"type":"multiple-choice","question":"H·∫£i li√™n t·ª•c g·ª≠i tin nh·∫Øn qu·∫•y r·ªëi, ƒëe d·ªça v√† tung ·∫£nh ch·∫ø nh·∫°o b·∫°n h·ªçc c·ªßa m√¨nh qua c√°c ·ª©ng d·ª•ng nh·∫Øn tin v√† m·∫°ng x√£ h·ªôi, khi·∫øn b·∫°n h·ªçc ƒë√≥ b·ªã √°p l·ª±c t√¢m l√≠ n·∫∑ng n·ªÅ. H√†nh vi c·ªßa H·∫£i ƒë∆∞·ª£c xem l√† h√†nh vi g√¨ trong m√¥i tr∆∞·ªùng s·ªë v√† c√≥ th·ªÉ b·ªã x·ª≠ l√≠ nh∆∞ th·∫ø n√†o?","questionImage":null,"mappedType":"multiple-choice","options":["H√†nh vi tr√™u ƒë√πa th√¥ng th∆∞·ªùng, kh√¥ng vi ph·∫°m ph√°p lu·∫≠t.","H√†nh vi spam tin nh·∫Øn, ch·ªâ b·ªã c·∫£nh c√°o.","B·∫Øt n·∫°t tr·ª±c tuy·∫øn (cyberbullying), vi ph·∫°m ph√°p lu·∫≠t v·ªÅ an ninh m·∫°ng v√† c√≥ th·ªÉ b·ªã x·ª≠ l√≠ h√†nh ch√≠nh ho·∫∑c h√¨nh s·ª± t√πy m·ª©c ƒë·ªô.","Giao ti·∫øp x√£ giao, kh√¥ng g√¢y h·∫≠u qu·∫£ nghi√™m tr·ªçng.","Ch·ªâ l√† h√†nh vi thi·∫øu vƒÉn h√≥a, kh√¥ng li√™n quan ƒë·∫øn ph√°p lu·∫≠t."],"optionsImage":[],"correctAnswerIndex":2},{"type":"multiple-choice","question":"Khi ƒëƒÉng k√≠ m·ªôt d·ªãch v·ª• tr·ª±c tuy·∫øn m·ªõi, Lan ƒë√£ ƒë·ªçc kƒ© ch√≠nh s√°ch quy·ªÅn ri√™ng t∆∞ v√† ph√°t hi·ªán r·∫±ng d·ªãch v·ª• n√†y y√™u c·∫ßu quy·ªÅn truy c·∫≠p v√†o danh b·∫° ƒëi·ªán tho·∫°i v√† l·ªãch s·ª≠ cu·ªôc g·ªçi c·ªßa c√¥. Theo Lu·∫≠t An to√†n th√¥ng tin m·∫°ng v√† Ngh·ªã ƒë·ªãnh v·ªÅ b·∫£o v·ªá d·ªØ li·ªáu c√° nh√¢n t·∫°i Vi·ªát Nam, quy·ªÅn c·ªßa Lan ƒë·ªëi v·ªõi th√¥ng tin n√†y l√† g√¨?","questionImage":null,"mappedType":"multiple-choice","options":["Lan b·∫Øt bu·ªôc ph·∫£i ƒë·ªìng √Ω n·∫øu mu·ªën s·ª≠ d·ª•ng d·ªãch v·ª•.","Lan c√≥ quy·ªÅn t·ª´ ch·ªëi cung c·∫•p th√¥ng tin kh√¥ng c·∫ßn thi·∫øt v√† y√™u c·∫ßu gi·∫£i th√≠ch r√µ r√†ng v·ªÅ m·ª•c ƒë√≠ch s·ª≠ d·ª•ng.","M·ªçi d·ªãch v·ª• tr·ª±c tuy·∫øn ƒë·ªÅu c√≥ quy·ªÅn y√™u c·∫ßu b·∫•t k√¨ th√¥ng tin c√° nh√¢n n√†o.","Th√¥ng tin danh b·∫° v√† l·ªãch s·ª≠ cu·ªôc g·ªçi kh√¥ng ph·∫£i l√† d·ªØ li·ªáu c√° nh√¢n nh·∫°y c·∫£m.","Lan ch·ªâ c√≥ quy·ªÅn khi·∫øu n·∫°i n·∫øu th√¥ng tin c·ªßa c√¥ b·ªã l·ªô ra ngo√†i."],"optionsImage":[],"correctAnswerIndex":1},{"type":"multiple-choice","question":"M·ªôt t√†i kho·∫£n ·∫©n danh tr√™n di·ªÖn ƒë√†n m·∫°ng th∆∞·ªùng xuy√™n ƒëƒÉng t·∫£i c√°c b√¨nh lu·∫≠n th√π gh√©t, k√≠ch ƒë·ªông b·∫°o l·ª±c v√† ph√¢n bi·ªát ƒë·ªëi x·ª≠ ƒë·ªëi v·ªõi m·ªôt nh√≥m ng∆∞·ªùi thi·ªÉu s·ªë. H√†nh vi n√†y th·ªÉ hi·ªán s·ª± thi·∫øu vƒÉn h√≥a n√†o trong m√¥i tr∆∞·ªùng s·ªë v√† ng∆∞·ªùi qu·∫£n l√≠ di·ªÖn ƒë√†n n√™n l√†m g√¨?","questionImage":null,"mappedType":"multiple-choice","options":["T·ª± do ng√¥n lu·∫≠n, ng∆∞·ªùi qu·∫£n l√≠ kh√¥ng c·∫ßn can thi·ªáp.","Th·ªÉ hi·ªán quan ƒëi·ªÉm c√° nh√¢n, ng∆∞·ªùi qu·∫£n l√≠ ch·ªâ n√™n nh·∫Øc nh·ªü.","Ph√°t ng√¥n g√¢y th√π gh√©t (hate speech), vi ph·∫°m ƒë·∫°o ƒë·ª©c v√† ph√°p lu·∫≠t. Ng∆∞·ªùi qu·∫£n l√≠ di·ªÖn ƒë√†n c·∫ßn g·ª° b·ªè b√†i vi·∫øt, c·∫£nh c√°o ho·∫∑c kh√≥a t√†i kho·∫£n v√† b√°o c√°o c∆° quan ch·ª©c nƒÉng n·∫øu c·∫ßn.","Ch·ªâ l√† h√†nh vi g√¢y tranh c√£i th√¥ng th∆∞·ªùng, ng∆∞·ªùi qu·∫£n l√≠ c√≥ th·ªÉ b·ªè qua.","Kh√¥ng c√≥ t√°c ƒë·ªông ti√™u c·ª±c ƒë√°ng k·ªÉ ƒë·∫øn c·ªông ƒë·ªìng."],"optionsImage":[],"correctAnswerIndex":2},{"type":"multiple-choice","question":"C∆∞·ªùng l·∫≠p m·ªôt trang web c√° nh√¢n v√† t·ª± √Ω sao ch√©p to√†n b·ªô n·ªôi dung, h√¨nh ·∫£nh t·ª´ m·ªôt trang b√°o ƒëi·ªán t·ª≠ l·ªõn m√† kh√¥ng c√≥ b·∫•t k·ª≥ tr√≠ch d·∫´n hay xin ph√©p n√†o. H√†nh vi n√†y c·ªßa C∆∞·ªùng vi ph·∫°m quy ƒë·ªãnh ph√°p lu·∫≠t n√†o?","questionImage":null,"mappedType":"multiple-choice","options":["Lu·∫≠t Giao d·ªãch ƒëi·ªán t·ª≠.","Lu·∫≠t Vi·ªÖn th√¥ng.","Lu·∫≠t S·ªü h·ªØu tr√≠ tu·ªá v·ªÅ quy·ªÅn t√°c gi·∫£ v√† quy·ªÅn li√™n quan.","Ngh·ªã ƒë·ªãnh v·ªÅ qu·∫£n l√≠ cung c·∫•p, s·ª≠ d·ª•ng d·ªãch v·ª• Internet c√¥ng c·ªông.","Kh√¥ng vi ph·∫°m n·∫øu trang web c·ªßa C∆∞·ªùng kh√¥ng thu l·ª£i nhu·∫≠n."],"optionsImage":[],"correctAnswerIndex":2},{"type":"multiple-choice","question":"M·ªôt ng∆∞·ªùi d√πng m·∫°ng x√£ h·ªôi th∆∞·ªùng xuy√™n chia s·∫ª c√°c h√¨nh ·∫£nh v√† video ri√™ng t∆∞ c·ªßa ng∆∞·ªùi kh√°c (ƒë∆∞·ª£c ch·ª•p ho·∫∑c quay l√©n) m√† kh√¥ng c√≥ s·ª± ƒë·ªìng √Ω c·ªßa h·ªç. H√†nh vi n√†y th·ªÉ hi·ªán s·ª± thi·∫øu vƒÉn h√≥a, tr√°i ƒë·∫°o ƒë·ª©c n√†o v√† c√≥ th·ªÉ d·∫´n ƒë·∫øn h·∫≠u qu·∫£ ph√°p l√≠ g√¨?","questionImage":null,"mappedType":"multiple-choice","options":["S·ª± thi·∫øu t·∫ø nh·ªã, ch·ªâ c·∫ßn xin l·ªói l√† ƒë·ªß.","H√†nh vi vi ph·∫°m quy·ªÅn ri√™ng t∆∞ v√† danh d·ª± c√° nh√¢n, c√≥ th·ªÉ b·ªã x·ª≠ ph·∫°t h√†nh ch√≠nh ho·∫∑c truy c·ª©u tr√°ch nhi·ªám h√¨nh s·ª± t√πy m·ª©c ƒë·ªô.","Quy·ªÅn ƒë∆∞·ª£c bi·∫øt th√¥ng tin c·ªßa c·ªông ƒë·ªìng.","H√†nh vi b√¨nh th∆∞·ªùng trong m√¥i tr∆∞·ªùng m·∫°ng x√£ h·ªôi.","Ch·ªâ l√† h√†nh vi ch∆∞a ph√π h·ª£p, kh√¥ng li√™n quan ƒë·∫øn ph√°p lu·∫≠t."],"optionsImage":[],"correctAnswerIndex":1},{"type":"multiple-choice","question":"Mai nh·∫≠n ƒë∆∞·ª£c m·ªôt email y√™u c·∫ßu cung c·∫•p th√¥ng tin t√†i kho·∫£n ng√¢n h√†ng v√† m·∫≠t kh·∫©u v·ªõi l√≠ do t√†i kho·∫£n c·ªßa c√¥ ƒëang g·∫∑p s·ª± c·ªë. Email n√†y c√≥ logo v√† giao di·ªán gi·ªëng h·ªát ng√¢n h√†ng Mai ƒëang s·ª≠ d·ª•ng. N·∫øu Mai l√†m theo h∆∞·ªõng d·∫´n, c√¥ c√≥ th·ªÉ tr·ªü th√†nh n·∫°n nh√¢n c·ªßa h√†nh vi vi ph·∫°m ph√°p lu·∫≠t n√†o?","questionImage":null,"mappedType":"multiple-choice","options":["Nghi·ªán Internet.","Qu·∫•y r·ªëi tr·ª±c tuy·∫øn.","L·ª´a ƒë·∫£o tr·ª±c tuy·∫øn (phishing), l·ª£i d·ª•ng l√≤ng tin ƒë·ªÉ chi·∫øm ƒëo·∫°t t√†i s·∫£n.","T·∫•n c√¥ng t·ª´ ch·ªëi d·ªãch v·ª• (DDoS).","Vi ph·∫°m b·∫£n quy·ªÅn th√¥ng tin."],"optionsImage":[],"correctAnswerIndex":2},{"type":"multiple-choice","question":"C√¥ng ty X th∆∞·ªùng xuy√™n thu th·∫≠p m·ªôt l∆∞·ª£ng l·ªõn d·ªØ li·ªáu c√° nh√¢n c·ªßa ng∆∞·ªùi d√πng t·ª´ c√°c website v√† ·ª©ng d·ª•ng c·ªßa m√¨nh m√† kh√¥ng c√¥ng khai m·ª•c ƒë√≠ch s·ª≠ d·ª•ng c·ª• th·ªÉ, c≈©ng nh∆∞ kh√¥ng c√≥ c∆° ch·∫ø r√µ r√†ng ƒë·ªÉ ng∆∞·ªùi d√πng qu·∫£n l√≠ ho·∫∑c x√≥a b·ªè d·ªØ li·ªáu c·ªßa h·ªç. Theo c√°c quy ƒë·ªãnh v·ªÅ b·∫£o v·ªá d·ªØ li·ªáu c√° nh√¢n t·∫°i Vi·ªát Nam, h√†nh vi n√†y c·ªßa C√¥ng ty X l√† g√¨?","questionImage":null,"mappedType":"multiple-choice","options":["Ho√†n to√†n h·ª£p ph√°p n·∫øu d·ªØ li·ªáu ƒë∆∞·ª£c m√£ h√≥a.","Vi ph·∫°m quy·ªÅn ri√™ng t∆∞ v√† quy ƒë·ªãnh v·ªÅ b·∫£o v·ªá d·ªØ li·ªáu c√° nh√¢n, c√≥ th·ªÉ b·ªã x·ª≠ ph·∫°t nghi√™m kh·∫Øc.","Th·ª±c h√†nh kinh doanh ti√™u chu·∫©n ƒë·ªÉ c·∫£i thi·ªán d·ªãch v·ª•.","Kh√¥ng vi ph·∫°m n·∫øu d·ªØ li·ªáu kh√¥ng b·ªã l·ªô ra ngo√†i.","Ch·ªâ l√† m·ªôt h√†nh vi thi·∫øu minh b·∫°ch, kh√¥ng li√™n quan ƒë·∫øn ph√°p lu·∫≠t."],"optionsImage":[],"correctAnswerIndex":1}];
            const quizOptions = {"timeLimit":30,"retriesAllowed":1,"showAnswers":true,"showExplanation":true,"aiAssessment":true,"scoring":{"mc":5,"tf":2,"sa":2,"essay":1,"tfMethod":"progressive"}};
            const googleScriptUrl = "https://script.google.com/macros/s/AKfycbx4hIe6B3txKERYKVESNvyYEm2boTLLQ59_iJ-MxfhXPT2gXMHT-yg6cqRg2hy9xra-/exec";
            const correctExamCode = "3OBU9U";
            const teacherApiKey = "AIzaSyApq2a1DqKwg1SaBn2jVlfxIRzRa0fHjR8";
            let studentInfo = {};
            let isSubmitted = false;
            let timerInterval;
            let retriesLeft = quizOptions.retriesAllowed;
            let studentApiKey = "";
            let ai = null;

            let proctoringLog = {
                thoatManHinh: 0,
                saoChep: 0,
                dan: 0,
                suKien: []
            };

            const studentQuizContainer = document.getElementById('student-quiz-container');
            const submitBtn = document.getElementById('submit-quiz-btn');
            const resultContainer = document.getElementById('result-container');
            const postSubmitOptions = document.getElementById('post-submit-options');
            const retryBtn = document.getElementById('retry-quiz-btn');
            const loginModal = document.getElementById('login-modal');
            const studentInfoForm = document.getElementById('student-info-form');
            const timerDisplay = document.getElementById('timer-display');
            const retriesDisplay = document.getElementById('retries-display');
            function shuffleQuiz() {
                // Shuffle options/statements within each question first
                quizData.forEach(item => {
                    // Shuffle multiple-choice options and their corresponding images
                    if (item.mappedType === 'multiple-choice' && item.options && item.options.length > 0) {
                        const correctAnswerText = item.options[item.correctAnswerIndex];
                        let optionsWithImages = item.options.map((opt, index) => ({
                            text: opt,
                            image: (item.optionsImage && item.optionsImage[index]) ? item.optionsImage[index] : null
                        }));
                        // Fisher-Yates shuffle
                        for (let i = optionsWithImages.length - 1; i > 0; i--) {
                            const j = Math.floor(Math.random() * (i + 1));
                            [optionsWithImages[i], optionsWithImages[j]] = [optionsWithImages[j], optionsWithImages[i]];
                        }
                        // Update the item with shuffled data
                        item.options = optionsWithImages.map(opt => opt.text);
                        item.optionsImage = optionsWithImages.map(opt => opt.image);
                        item.correctAnswerIndex = item.options.indexOf(correctAnswerText);
                    }
                    // Shuffle true-false statements
                    if (item.mappedType === 'true-false' && item.statements && item.statements.length > 0) {
                         for (let i = item.statements.length - 1; i > 0; i--) {
                            const j = Math.floor(Math.random() * (i + 1));
                            [item.statements[i], item.statements[j]] = [item.statements[j], item.statements[i]];
                        }
                    }
                });
                // Then, group questions by type and shuffle within each group
                const grouped = quizData.reduce((acc, q) => {
                    const type = q.mappedType;
                    if (!acc[type]) {
                        acc[type] = [];
                    }
                    acc[type].push(q);
                    return acc;
                }, {});
                let shuffledQuizData = [];
                const partOrder = ['multiple-choice', 'true-false', 'short-answer', 'essay'];
                partOrder.forEach(partType => {
                    if (grouped[partType]) {
                        const partQuestions = grouped[partType];
                        for (let i = partQuestions.length - 1; i > 0; i--) {
                            const j = Math.floor(Math.random() * (i + 1));
                            [partQuestions[i], partQuestions[j]] = [partQuestions[j], partQuestions[i]];
                        }
                        shuffledQuizData = shuffledQuizData.concat(partQuestions);
                    }
                });
               
                quizData = shuffledQuizData;
            }
            // --- Timer Function ---
            function startTimer(duration, display) {
                let timer = duration, minutes, seconds;
                clearInterval(timerInterval); // Clear any existing timer
                if(duration <= 0) {
                     display.textContent = "‚àû";
                     return;
                }
                timerInterval = setInterval(function () {
                    minutes = parseInt(timer / 60, 10);
                    seconds = parseInt(timer % 60, 10);
                    minutes = minutes < 10 ? "0" + minutes : minutes;
                    seconds = seconds < 10 ? "0" + seconds : seconds;
                    display.textContent = minutes + ":" + seconds;
                    if (--timer < 0) {
                        clearInterval(timerInterval);
                        alert("H·∫øt gi·ªù l√†m b√†i!");
                        handleSubmit();
                    }
                }, 1000);
            }
            
            async function showExplanation(index, button) {
                const item = quizData[index];
                const questionCard = document.getElementById(`student-q-${index}`);
                const feedbackDiv = document.getElementById(`q-${index}-feedback`);
                if (!questionCard || !feedbackDiv) return;

                const existingExplanation = feedbackDiv.querySelector('.ai-explanation');
                if (existingExplanation) {
                    existingExplanation.remove();
                    button.innerHTML = `
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                        Xem gi·∫£i th√≠ch
                    `;
                    return;
                }

                button.disabled = true;
                button.innerHTML = '<div class="loader mr-2"></div> ƒêang t·∫£i...';

                if (item.explanation) {
                    displayExplanation(item.explanation, feedbackDiv, button);
                    return;
                }

                if (!ai) {
                    alert("T√≠nh nƒÉng gi·∫£i th√≠ch y√™u c·∫ßu API Key, nh∆∞ng ch∆∞a ƒë∆∞·ª£c c·∫•u h√¨nh b·ªüi gi√°o vi√™n.");
                    button.disabled = false;
                    button.innerHTML = `
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                        Xem gi·∫£i th√≠ch
                    `;
                    return;
                }

                const questionText = item.question || item.main_question;
                let prompt = `B·∫°n l√† m·ªôt tr·ª£ l√Ω gi√°o vi√™n AI, am hi·ªÉu s√¢u s·∫Øc Ch∆∞∆°ng tr√¨nh GDPT 2018. H√£y cung c·∫•p m·ªôt l·ªùi gi·∫£i chi ti·∫øt, t·ª´ng b∆∞·ªõc m·ªôt cho c√¢u h·ªèi sau ƒë√¢y. L·ªùi gi·∫£i ph·∫£i ch√≠nh x√°c, d·ªÖ hi·ªÉu v√† ph√π h·ª£p v·ªõi ph∆∞∆°ng ph√°p gi·∫£ng d·∫°y c·ªßa ch∆∞∆°ng tr√¨nh h·ªçc, TUY·ªÜT ƒê·ªêI KH√îNG s·ª≠ d·ª•ng ki·∫øn th·ª©c c·ªßa l·ªõp cao h∆°n ƒë·ªÉ gi·∫£i th√≠ch.\n\n--- C√ÇU H·ªéI ---\n${questionText}\n\n`;
                if (item.mappedType === 'multiple-choice') {
                    prompt += `--- C√ÅC L·ª∞A CH·ªåN ---\n${item.options.map((opt, i) => `${String.fromCharCode(65 + i)}. ${opt}`).join('\n')}\n\n`;
                    prompt += `--- ƒê√ÅP √ÅN ƒê√öNG ---\n${String.fromCharCode(65 + item.correctAnswerIndex)}. ${item.options[item.correctAnswerIndex]}`;
                } else if (item.mappedType === 'true-false') {
                    prompt += `--- C√ÅC M·ªÜNH ƒê·ªÄ & ƒê√ÅP √ÅN ---\n${item.statements.map(s => ` - ${s.statement} -> ${s.is_correct ? 'ƒê√∫ng' : 'Sai'}`).join('\n')}`;
                } else {
                    prompt += `--- ƒê√ÅP √ÅN / G·ª¢I √ù ---\n${item.answer}`;
                }
                prompt += `\n\n--- Y√äU C·∫¶U ---\nGi·∫£i th√≠ch r√µ r√†ng t·∫°i sao ƒë√°p √°n l·∫°i ƒë√∫ng, t·ª´ng b∆∞·ªõc m·ªôt. ƒê·ªãnh d·∫°ng t·∫•t c·∫£ c√°c c√¥ng th·ª©c to√°n h·ªçc b·∫±ng LaTeX.`;

                try {
                    const response = await ai.models.generateContent({ model: "gemini-2.5-flash", contents: prompt });
                    const explanationText = response.text.replace(/\n/g, '<br>');
                    item.explanation = explanationText; // Cache it
                    displayExplanation(explanationText, feedbackDiv, button);
                } catch (error) {
                    console.error("L·ªói khi t·∫°o gi·∫£i th√≠ch:", error);
                    feedbackDiv.insertAdjacentHTML('beforeend', '<div class="ai-explanation text-red-600">L·ªói: Kh√¥ng th·ªÉ t·∫°o gi·∫£i th√≠ch.</div>');
                    button.disabled = false;
                    button.innerHTML = `
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                        Th·ª≠ l·∫°i
                    `;
                }
            }

            function displayExplanation(explanationText, container, button) {
                container.insertAdjacentHTML('beforeend', `<div class="ai-explanation prose prose-sm">${explanationText}</div>`);
                if (window.MathJax) MathJax.typesetPromise([container]);
                button.disabled = false;
                button.innerHTML = `
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>
                    ·∫®n gi·∫£i th√≠ch
                `;
            }
           
            function renderStudentQuiz() {
                studentQuizContainer.innerHTML = '';
               
                const grouped = quizData.reduce((acc, q) => {
                    const type = q.mappedType;
                    if (!acc[type]) {
                        acc[type] = [];
                    }
                    acc[type].push(q);
                    return acc;
                }, {});
                const groupInfo = {
                    'multiple-choice': { title: 'PH·∫¶N I. TR·∫ÆC NGHI·ªÜM KH√ÅCH QUAN', subtitle: 'Ch·ªçn ƒë√°p √°n ƒë√∫ng nh·∫•t trong c√°c l·ª±a ch·ªçn sau.' },
                    'true-false': { title: 'PH·∫¶N II. C√ÇU H·ªéI ƒê√öNG - SAI', subtitle: 'X√°c ƒë·ªãnh t√≠nh ƒë√∫ng ho·∫∑c sai cho m·ªói m·ªánh ƒë·ªÅ d∆∞·ªõi ƒë√¢y.' },
                    'short-answer': { title: 'PH·∫¶N III. C√ÇU H·ªéI TR·∫¢ L·ªúI NG·∫ÆN', subtitle: 'ƒêi·ªÅn ƒë√°p √°n ng·∫Øn g·ªçn v√†o ph·∫ßn tr·∫£ l·ªùi.' },
                    'essay': { title: 'PH·∫¶N IV. C√ÇU H·ªéI T·ª∞ LU·∫¨N', subtitle: 'Tr√¨nh b√†y chi ti·∫øt b√†i gi·∫£i c·ªßa b·∫°n.' }
                };
               
                let questionCounter = 0;
                const partOrder = ['multiple-choice', 'true-false', 'short-answer', 'essay'];
                partOrder.forEach(partType => {
                    const questions = grouped[partType];
                    if (!questions || questions.length === 0) return;
                   
                    let groupHTML = `<div class="group-container space-y-8 mb-12">`;
                    const info = groupInfo[partType];
                    groupHTML += `
                        <div class="group-header pb-3 border-b-2 border-slate-300 mb-6">
                            <h2 class="text-2xl font-bold text-slate-800">${info.title}</h2>
                            ${info.subtitle ? `<p class="text-md text-slate-600 italic mt-1">${info.subtitle}</p>` : ''}
                        </div>
                    `;
                    questions.forEach((item, localIndex) => {
                        const globalIndex = quizData.indexOf(item);
                        questionCounter++;
                        groupHTML += `<div class="question-card" id="student-q-${globalIndex}">`;
                        let questionText = (item.question || item.main_question || '').replace(/\n/g, '<br>');
                       
                        groupHTML += `<div class="flex items-start">
                                     <div class="flex-grow">
                                         <div class="flex items-center mb-2">
                                             <span class="font-bold text-lg mr-3 text-indigo-600">C√¢u ${questionCounter}:</span>
                                             <div id="q-${globalIndex}-feedback-icon"></div>
                                         </div>
                                         <div class="question-content mt-2 text-lg text-slate-700">${questionText}</div>
                                         ${item.questionImage ? `<img src="${item.questionImage}" class="mt-4 rounded-lg max-w-full md:max-w-md border shadow-sm">` : ''}
                                     </div>
                                 </div>`;
                       
                        groupHTML += `<div class="mt-6">`;
                        switch(item.mappedType) {
                            case 'multiple-choice':
                                groupHTML += `<div class="options-grid grid grid-cols-1 md:grid-cols-2 gap-4">`;
                                item.options.forEach((opt, i) => {
                                    groupHTML += `<label for="q${globalIndex}-opt${i}" id="q${globalIndex}-opt-label${i}" class="option-label flex items-start p-4 border-2 rounded-xl cursor-pointer hover:bg-indigo-50 hover:border-indigo-400">
                                                     <input type="radio" name="q${globalIndex}" id="q${globalIndex}-opt${i}" value="${i}" class="flex-shrink-0 mt-1 h-5 w-5 text-indigo-600 focus:ring-indigo-500 border-gray-300">
                                                     <div class="ml-3 flex-grow">
                                                         <span class="font-semibold text-slate-800">${String.fromCharCode(65 + i)}.</span>
                                                         <span class="option-content text-slate-700">${opt || ''}</span>
                                                         ${(item.optionsImage && item.optionsImage[i]) ? `<img src="${item.optionsImage[i]}" class="mt-2 rounded-lg max-w-xs border shadow-sm">` : ''}
                                                     </div>
                                                 </label>`;
                                });
                                groupHTML += `</div>`;
                                break;
                            case 'true-false':
                                 groupHTML += `<div class="space-y-4">`;
                                 item.statements.forEach((s, i) => {
                                     groupHTML += `<div class="statement-item border-t pt-4">
                                                  <p class="mb-3 text-slate-700">${String.fromCharCode(97 + i)}) ${s.statement || ''}</p>
                                                  <div class="flex gap-x-6">
                                                      <label class="flex items-center cursor-pointer"><input type="radio" name="q${globalIndex}-s${i}" value="true" class="mr-2 h-4 w-4"> ƒê√∫ng</label>
                                                      <label class="flex items-center cursor-pointer"><input type="radio" name="q${globalIndex}-s${i}" value="false" class="mr-2 h-4 w-4"> Sai</label>
                                                  </div>
                                              </div>`;
                                 });
                                 groupHTML += `</div>`;
                                 break;
                            case 'short-answer':
                                groupHTML += `<input type="text" name="q${globalIndex}" class="mt-1 block w-full md:w-1/2 border border-slate-300 rounded-lg shadow-sm py-2.5 px-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" placeholder="Nh·∫≠p ƒë√°p √°n c·ªßa b·∫°n...">`;
                                break;
                            case 'essay':
                                groupHTML += `<textarea name="q${globalIndex}" class="mt-1 block w-full border border-slate-300 rounded-lg shadow-sm py-2.5 px-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm" rows="5" placeholder="Nh·∫≠p c√¢u tr·∫£ l·ªùi t·ª± lu·∫≠n c·ªßa b·∫°n..."></textarea>`;
                                break;
                        }
                        groupHTML += `</div><div id="q-${globalIndex}-feedback" class="mt-4"></div></div>`;
                    });
                    groupHTML += `</div>`;
                    studentQuizContainer.innerHTML += groupHTML;
                });
               
                if (window.MathJax && typeof window.MathJax.typesetPromise === 'function') {
                    MathJax.typesetPromise([studentQuizContainer]);
                }
            }
           
            async function generatePerformanceReview(allAnswersData) {
                const feedbackContainer = document.getElementById('ai-feedback-container');
                if (!feedbackContainer || !ai) return null;
                feedbackContainer.classList.remove('hidden');
                feedbackContainer.innerHTML = `
                    <div class="bg-white p-6 rounded-xl shadow-lg">
                        <h3 class="text-xl font-bold text-slate-800 mb-4">üìù Ph√¢n T√≠ch & G·ª£i √ù T·ª´ Tr·ª£ L√Ω AI</h3>
                        <div id="ai-feedback-loader" class="text-center py-6">
                            <svg class="animate-spin mx-auto h-10 w-10 text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                            </svg>
                            <p class="mt-3 text-slate-600">AI ƒëang ph√¢n t√≠ch b√†i l√†m c·ªßa b·∫°n...</p>
                        </div>
                        <div id="ai-feedback-summary" class="hidden prose prose-sm max-w-none"></div>
                        <div id="ai-feedback-details" class="hidden mt-4 space-y-2"></div>
                    </div>
                `;
               
                const loader = document.getElementById('ai-feedback-loader');
                const summaryDiv = document.getElementById('ai-feedback-summary');
                const detailsDiv = document.getElementById('ai-feedback-details');
                const incorrectAnswers = allAnswersData.filter(a => !a.isCorrect);
                if (incorrectAnswers.length === 0) {
                    feedbackContainer.innerHTML = `
                        <div class="bg-white p-6 rounded-xl shadow-lg text-center">
                            <h3 class="text-xl font-bold text-green-600">üéâ Ch√∫c m·ª´ng!</h3>
                            <p class="mt-2 text-slate-700">B·∫°n ƒë√£ tr·∫£ l·ªùi ƒë√∫ng t·∫•t c·∫£ c√°c c√¢u h·ªèi. L√†m t·ªët l·∫Øm!</p>
                        </div>
                    `;
                    return { overallFeedback: { summary: "Xu·∫•t s·∫Øc! H·ªçc sinh ƒë√£ ƒë√£ tr·∫£ l·ªùi ƒë√∫ng t·∫•t c·∫£ c√°c c√¢u h·ªèi." } };
                }
                const summaryPrompt = `B·∫°n l√† m·ªôt tr·ª£ l√Ω gi√°o vi√™n, n√≥i ti·∫øng Vi·ªát. D·ª±a v√†o t√≥m t·∫Øt c√°c c√¢u tr·∫£ l·ªùi sai c·ªßa h·ªçc sinh, h√£y ƒë∆∞a ra m·ªôt nh·∫≠n x√©t t·ªïng quan ng·∫Øn g·ªçn (kho·∫£ng 3-4 c√¢u) v·ªÅ nƒÉng l·ª±c c·ªßa h·ªçc sinh, bao g·ªìm ƒëi·ªÉm m·∫°nh (suy lu·∫≠n t·ª´ c√°c c√¢u l√†m ƒë√∫ng), ƒëi·ªÉm y·∫øu (d·ª±a tr√™n c√°c c√¢u sai) v√† m·ªôt v√†i g·ª£i √Ω √¥n t·∫≠p chung. L·ªùi vƒÉn ph·∫£i kh√≠ch l·ªá, r√µ r√†ng.
                T√≥m t·∫Øt l·ªói sai:
                ${JSON.stringify(incorrectAnswers.map(a => ({ cau: a.questionNumber, loai: a.type, cauHoi: a.question.substring(0, 50) + '...' })), null, 2)}`;
                try {
                    const response = await ai.models.generateContent({
                        model: "gemini-2.5-flash",
                        contents: summaryPrompt
                    });
                    summaryDiv.innerHTML = response.text.replace(/\n/g, '<br>');
                    loader.classList.add('hidden');
                    summaryDiv.classList.remove('hidden');
                    detailsDiv.classList.remove('hidden'); 
                } catch (e) {
                    console.error("L·ªói khi l·∫•y nh·∫≠n x√©t t·ªïng quan:", e);
                    summaryDiv.innerHTML = '<p class="text-red-600">L·ªói khi t·∫°o nh·∫≠n x√©t t·ªïng quan.</p>';
                    loader.classList.add('hidden');
                    summaryDiv.classList.remove('hidden');
                }
               
                const summaryForSheet = summaryDiv.innerText.substring(0, 200) + "...";
                return { overallFeedback: { summary: summaryForSheet } };
            }
            async function handleSubmit() {
                if (isSubmitted) return;
                isSubmitted = true;
                clearInterval(timerInterval);
                
                document.querySelectorAll('input, textarea').forEach(input => input.disabled = true);
                submitBtn.classList.add('hidden');
                postSubmitOptions.classList.remove('hidden');
                if (retriesLeft > 0) {
                    retryBtn.classList.remove('hidden');
                } else {
                    retryBtn.classList.add('hidden');
                }

                const proctoringDataString = JSON.stringify(proctoringLog);

                let totalStudentScore = 0;
                let totalCorrectAnswers = 0;
                let allAnswersData = [];
                const questionCounts = quizData.reduce((acc, q) => {
                    const type = q.mappedType;
                    acc[type] = (acc[type] || 0) + 1;
                    return acc;
                }, {});
                
                quizData.forEach((item, index) => {
                    let questionNumber = index + 1;
                    let answerData = { questionNumber, type: item.type };
                    switch (item.mappedType) {
                        case 'multiple-choice':
                            const selectedOption = document.querySelector(`input[name="q${index}"]:checked`);
                            const isCorrectMC = selectedOption ? parseInt(selectedOption.value) === item.correctAnswerIndex : false;
                            if (isCorrectMC) {
                                totalCorrectAnswers++;
                                if (questionCounts['multiple-choice'] > 0) {
                                   totalStudentScore += quizOptions.scoring.mc / questionCounts['multiple-choice'];
                                }
                            }
                            answerData.question = item.question;
                            answerData.options = item.options;
                            answerData.yourAnswer = selectedOption ? String.fromCharCode(65 + parseInt(selectedOption.value)) : "Kh√¥ng tr·∫£ l·ªùi";
                            answerData.correctAnswer = String.fromCharCode(65 + item.correctAnswerIndex);
                            answerData.isCorrect = isCorrectMC;
                            break;
                        case 'true-false':
                            let correctStatementsCount = 0;
                            let yourAnswerPattern = [];
                            let correctAnswerPattern = [];
                            let details = [];
                            item.statements.forEach((s, i) => {
                                const selectedTF = document.querySelector(`input[name="q${index}-s${i}"]:checked`);
                                const studentChoice = selectedTF ? selectedTF.value === 'true' : null;
                                const isStatementCorrect = studentChoice === s.is_correct;
                               
                                if (isStatementCorrect) correctStatementsCount++;
                               
                                yourAnswerPattern.push(studentChoice === null ? '?' : (studentChoice ? 'ƒê' : 'S'));
                                correctAnswerPattern.push(s.is_correct ? 'ƒê' : 'S');
                                details.push({ statement: s.statement, yourChoice: studentChoice === null ? 'Kh√¥ng tr·∫£ l·ªùi' : (studentChoice ? 'ƒê√∫ng' : 'Sai'), correctChoice: s.is_correct ? 'ƒê√∫ng' : 'Sai', isCorrect: isStatementCorrect });
                            });
                            
                            let scorePerTfQuestion = 0;
                            if (questionCounts['true-false'] > 0) {
                                scorePerTfQuestion = quizOptions.scoring.tf / questionCounts['true-false'];
                            }
                            let questionPoints = 0;
                            if (quizOptions.scoring.tfMethod === 'progressive') {
                                const progressivePoints = { 0: 0, 1: 0.1, 2: 0.25, 3: 0.5, 4: 1.0 };
                                questionPoints = progressivePoints[correctStatementsCount] * scorePerTfQuestion;
                            } else { // even
                                questionPoints = (correctStatementsCount / 4) * scorePerTfQuestion;
                            }
                            totalStudentScore += questionPoints;

                            if(correctStatementsCount === 4) totalCorrectAnswers++;
                            answerData.question = item.main_question;
                            answerData.yourAnswer = yourAnswerPattern.join('-');
                            answerData.correctAnswer = correctAnswerPattern.join('-');
                            answerData.isCorrect = correctStatementsCount === 4;
                            answerData.details = details;
                            break;
                       
                        case 'short-answer':
                            const saInput = document.querySelector(`input[name="q${index}"]`);
                            const studentAnswerRaw = saInput ? (saInput.value ?? '').trim() : "";
                            const correctAnswerRaw = (item.answer ?? '').toString().trim().replace(/\$/g, '');
                            let isCorrectSA = false;
                            const studentAnswerNormalized = studentAnswerRaw.replace(',', '.');
                            const correctAnswerNormalized = correctAnswerRaw.replace(',', '.');
                            if (studentAnswerNormalized.toLowerCase() === correctAnswerNormalized.toLowerCase()) {
                                isCorrectSA = true;
                            }
                             if (isCorrectSA) {
                                totalCorrectAnswers++;
                                if (questionCounts['short-answer'] > 0) {
                                   totalStudentScore += quizOptions.scoring.sa / questionCounts['short-answer'];
                                }
                            }
                            answerData.question = item.question;
                            answerData.yourAnswer = studentAnswerRaw || "Kh√¥ng tr·∫£ l·ªùi";
                            answerData.correctAnswer = correctAnswerRaw;
                            answerData.isCorrect = isCorrectSA;
                            break;
                           
                        case 'essay':
                             const essayInput = document.querySelector(`textarea[name="q${index}"]`);
                             answerData.question = item.question;
                             answerData.yourAnswer = essayInput.value || "Kh√¥ng tr·∫£ l·ªùi";
                             answerData.correctAnswer = item.answer;
                             answerData.isCorrect = null; // Needs manual grading
                             break;
                    }
                    allAnswersData.push(answerData);
                });
                
                const finalScore = totalStudentScore;
                
                let competencyAssessment = "Gi√°o vi√™n kh√¥ng y√™u c·∫ßu AI ph√¢n t√≠ch b√†i l√†m.";
                if (quizOptions.aiAssessment) {
                    const feedbackData = await generatePerformanceReview(allAnswersData);
                    if (feedbackData && feedbackData.overallFeedback && feedbackData.overallFeedback.summary) {
                        competencyAssessment = feedbackData.overallFeedback.summary;
                    } else {
                        competencyAssessment = "C√≥ l·ªói x·∫£y ra trong qu√° tr√¨nh AI ph√¢n t√≠ch b√†i l√†m.";
                    }
                }
                
                if (quizOptions.showAnswers) {
                    const totalQuestions = quizData.length;
                    resultContainer.innerHTML = `<div class="bg-white p-6 rounded-xl shadow-lg text-center">
                        <h3 class="text-2xl font-bold text-slate-800">K·∫æT QU·∫¢ B√ÄI L√ÄM</h3>
                        <p class="mt-4 text-lg">S·ªë c√¢u ƒë√∫ng ho√†n to√†n: <span class="font-bold text-green-600">${totalCorrectAnswers}/${totalQuestions}</span></p>
                        <p class="text-2xl mt-2">ƒêi·ªÉm (thang 10): <span class="font-bold text-blue-600">${finalScore.toFixed(2)}</span></p>
                        ${questionCounts['essay'] > 0 ? `<p class="text-sm text-gray-600 italic mt-1">L∆∞u √Ω: ƒêi·ªÉm tr√™n ch∆∞a bao g·ªìm ${quizOptions.scoring.essay} ƒëi·ªÉm c·ªßa ph·∫ßn T·ª± lu·∫≠n.</p>` : ''}
                    </div>`;
                    resultContainer.classList.remove('hidden');

                    allAnswersData.forEach((ans, index) => {
                        const questionCard = document.getElementById(`student-q-${index}`);
                        const feedbackIconDiv = document.getElementById(`q-${index}-feedback-icon`);
                        const feedbackDiv = document.getElementById(`q-${index}-feedback`);
                        if (!questionCard || !feedbackIconDiv || !feedbackDiv) return;

                        const iconHTML = ans.isCorrect === true
                            ? '<svg class="feedback-icon text-green-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>'
                            : (ans.isCorrect === false ? '<svg class="feedback-icon text-red-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg>' : '');
                        feedbackIconDiv.innerHTML = iconHTML;

                        if (ans.type.includes('multiple-choice')) {
                            const studentChoice = ans.yourAnswer === "Kh√¥ng tr·∫£ l·ªùi" ? -1 : ans.yourAnswer.charCodeAt(0) - 65;
                            const correctChoice = ans.correctAnswer.charCodeAt(0) - 65;
                            document.getElementById(`q-${index}-opt-label${correctChoice}`)?.classList.add('correct');
                            if (studentChoice !== -1 && studentChoice !== correctChoice) {
                                document.getElementById(`q-${index}-opt-label${studentChoice}`)?.classList.add('incorrect');
                            }
                        } else if (ans.type === 'true-false') {
                            const statementItems = questionCard.querySelectorAll('.statement-item');
                            ans.details.forEach((detail, i) => { if(statementItems[i]) { statementItems[i].classList.add(detail.isCorrect ? 'correct' : 'incorrect'); }});
                        }

                        if (quizOptions.showExplanation) {
                            feedbackDiv.innerHTML = `<button data-explain-index="${index}" class="explain-btn mt-4 flex items-center px-4 py-2 bg-blue-100 text-blue-800 text-sm font-semibold rounded-lg hover:bg-blue-200 transition-colors">
                                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                Xem gi·∫£i th√≠ch
                            </button>`;
                        }
                    });
                    
                    document.querySelectorAll('.explain-btn').forEach(btn => {
                        btn.addEventListener('click', (e) => {
                            const button = e.currentTarget;
                            const index = parseInt(button.dataset.explainIndex, 10);
                            showExplanation(index, button);
                        });
                    });

                    if (window.MathJax) await window.MathJax.typesetPromise([studentQuizContainer]);
                } else {
                     resultContainer.innerHTML = `<div class="bg-white p-6 rounded-xl shadow-lg text-center"><h3 class="text-xl font-bold text-green-600">N·ªôp b√†i th√†nh c√¥ng!</h3><p class="mt-2 text-slate-700">B·∫°n ƒë√£ ho√†n th√†nh b√†i l√†m. K·∫øt qu·∫£ s·∫Ω ƒë∆∞·ª£c gi√°o vi√™n c√¥ng b·ªë sau.</p></div>`;
                    resultContainer.classList.remove('hidden');
                }
                
                const formData = new FormData();
                formData.append('name', studentInfo.name);
                formData.append('class', studentInfo.class);
                formData.append('score', `${finalScore.toFixed(2)}/10`);
                formData.append('assessment', competencyAssessment);
                formData.append('timestamp', new Date().toLocaleString('vi-VN'));
                formData.append('examCode', correctExamCode);
                formData.append('monitoringLog', proctoringDataString);
                formData.append('answerDetails', JSON.stringify(allAnswersData));
               
                fetch(googleScriptUrl, { method: 'POST', body: formData})
                    .then(res => console.log("Successfully submitted to Google Sheet"))
                    .catch(err => console.error("Error submitting to Google Sheet:", err));
            }
           
            function startNewAttempt() {
                isSubmitted = false;
                proctoringLog = { thoatManHinh: 0, saoChep: 0, dan: 0, suKien: [] };
                const proctoringWidget = document.getElementById('proctoring-widget');
                if (proctoringWidget) {
                    proctoringWidget.classList.add('hidden');
                    document.getElementById('tab-switch-count').textContent = '0';
                    document.getElementById('copy-count').textContent = '0';
                    document.getElementById('paste-count').textContent = '0';
                }

                renderStudentQuiz();
                resultContainer.classList.add('hidden');
                document.getElementById('ai-feedback-container').classList.add('hidden');
                postSubmitOptions.classList.add('hidden');
                submitBtn.classList.remove('hidden');
                 if (quizOptions.timeLimit > 0) {
                    const timeInSeconds = quizOptions.timeLimit * 60;
                    startTimer(timeInSeconds, timerDisplay);
                }
                retriesLeft--;
                retriesDisplay.textContent = `L∆∞·ª£t l√†m l·∫°i c√≤n: ${retriesLeft}`;
                window.scrollTo(0, 0);
            }
            studentInfoForm.addEventListener('submit', (e) => {
                e.preventDefault();
               
                const enteredCode = document.getElementById('exam-code').value.trim().toUpperCase();
                if (correctExamCode && enteredCode !== correctExamCode) {
                    alert('M√£ ƒë·ªÅ kh√¥ng ch√≠nh x√°c. Vui l√≤ng ki·ªÉm tra l·∫°i!');
                    return;
                }
               
                studentApiKey = teacherApiKey;
                if (!studentApiKey) {
                    console.warn('C·∫£nh b√°o: Gi√°o vi√™n ch∆∞a c·∫•u h√¨nh API Key. C√°c t√≠nh nƒÉng AI s·∫Ω kh√¥ng ho·∫°t ƒë·ªông.');
                }
       
                try {
                    if (studentApiKey) {
                       ai = new GoogleGenAI({ apiKey: studentApiKey });
                    }
                } catch(e) {
                    console.error("L·ªói kh·ªüi t·∫°o Gemini API v·ªõi key c·ªßa gi√°o vi√™n.", e);
                    alert("C·∫£nh b√°o: API Key c·ªßa gi√°o vi√™n kh√¥ng h·ª£p l·ªá. Vui l√≤ng b√°o cho gi√°o vi√™n. C√°c t√≠nh nƒÉng AI s·∫Ω kh√¥ng ho·∫°t ƒë·ªông.");
                    ai = null;
                }
                shuffleQuiz();
               
                studentInfo.name = document.getElementById('student-name').value;
                studentInfo.class = document.getElementById('student-class').value;
                loginModal.classList.add('hidden');
                studentQuizContainer.classList.remove('hidden');
                submitBtn.classList.remove('hidden');
               
                if (quizOptions.timeLimit > 0) {
                    const timeInSeconds = quizOptions.timeLimit * 60;
                    startTimer(timeInSeconds, timerDisplay);
                } else {
                    timerDisplay.textContent = "Kh√¥ng gi·ªõi h·∫°n";
                }
                retriesDisplay.textContent = `L∆∞·ª£t l√†m l·∫°i c√≤n: ${retriesLeft}`;
                renderStudentQuiz();

                const proctoringWidget = document.getElementById('proctoring-widget');
                const tabSwitchCountEl = document.getElementById('tab-switch-count');
                const copyCountEl = document.getElementById('copy-count');
                const pasteCountEl = document.getElementById('paste-count');

                function updateProctoringUI() {
                    if (proctoringLog.thoatManHinh > 0 || proctoringLog.saoChep > 0 || proctoringLog.dan > 0) {
                        proctoringWidget.classList.remove('hidden');
                    }
                    tabSwitchCountEl.textContent = proctoringLog.thoatManHinh;
                    copyCountEl.textContent = proctoringLog.saoChep;
                    pasteCountEl.textContent = proctoringLog.dan;
                }

                // Disable Right Click
                document.addEventListener('contextmenu', e => e.preventDefault());

                // Track Tab Switching
                document.addEventListener('visibilitychange', () => {
                    if (document.hidden && !isSubmitted) {
                        proctoringLog.thoatManHinh++;
                        proctoringLog.suKien.push({ loai: 'chuyen_tab', thoiGian: new Date().toISOString() });
                        updateProctoringUI();
                    }
                });

                // Track Copying
                document.addEventListener('copy', () => {
                    if (isSubmitted) return;
                    proctoringLog.saoChep++;
                    proctoringLog.suKien.push({ loai: 'sao_chep', thoiGian: new Date().toISOString() });
                    updateProctoringUI();
                });

                // Track Pasting
                document.addEventListener('paste', () => {
                    if (isSubmitted) return;
                    proctoringLog.dan++;
                    proctoringLog.suKien.push({ loai: 'dan', thoiGian: new Date().toISOString() });
                    updateProctoringUI();
                });
            });
            
            submitBtn.addEventListener('click', handleSubmit);
            retryBtn.addEventListener('click', () => {
                shuffleQuiz();
                startNewAttempt();
            });
        </script>
    </body>
    </html>
    