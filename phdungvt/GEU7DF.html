
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bài kiểm tra - 14/11/2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background-color: #f4f5f7; }
        .option.selected { border-color: #3b82f6; background-color: #eff6ff; }
        .option.correct { border-color: #22c55e; background-color: #f0fdf4; }
        .option.incorrect { border-color: #ef4444; background-color: #fef2f2; }
        .disabled { pointer-events: none; opacity: 0.7; }
        .monitoring-warning { position: fixed; top: 10px; left: 50%; transform: translateX(-50%); background-color: #ef4444; color: white; padding: 10px 20px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); z-index: 1000; display: none; animation: fade-in-out 5s ease-in-out; }
        @keyframes fade-in-out { 0%, 100% { opacity: 0; transform: translate(-50%, -20px); } 10%, 90% { opacity: 1; transform: translate(-50%, 0); } }
        /* MathJax basic styling */
        mjx-container { text-align: left !important; }
    </style>
    <script>
      window.MathJax = {
        tex: { inlineMath: [['$', '$'], ['\(', '\)']], displayMath: [['$$', '$$'], ['\[', '\]']] },
        svg: { fontCache: 'global' }
      };
    </script>
    <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@google/generative-ai@latest" type="module"></script>
</head>
<body class="bg-gray-100">
    <div id="app" class="container mx-auto p-4 max-w-4xl"></div>
    <div id="monitoring-warning-container" class="monitoring-warning">Bạn đã thoát khỏi chế độ toàn màn hình!</div>
    <script type="module">
        import { GoogleGenAI } from "https://cdn.jsdelivr.net/npm/@google/generative-ai@latest/dist/index.min.js";

        const quizData = [{"question":"Giá trị của phép tính $7 \\times 8$ là bao nhiêu?","options":["$54$","$56$","$63$","$72$"],"correctAnswerIndex":1,"type":"multiple-choice","isDirty":false,"explanation":null,"shuffleOptions":{"stem":true,"answers":true},"rendered_question":"Giá trị của phép tính $7 \\times 8$ là bao nhiêu?","rendered_options":["$54$","$56$","$63$","$72$"]},{"question":"Kết quả của phép chia $45 \\div 9$ là bao nhiêu?","options":["$4$","$5$","$6$","$7$"],"correctAnswerIndex":1,"type":"multiple-choice","isDirty":false,"explanation":null,"shuffleOptions":{"stem":true,"answers":true},"rendered_question":"Kết quả của phép chia $45 \\div 9$ là bao nhiêu?","rendered_options":["$4$","$5$","$6$","$7$"]},{"question":"Phép tính nào sau đây là đúng?","options":["$6 \\times 7 = 48$","$8 \\times 7 = 56$","$9 \\times 6 = 52$","$7 \\times 9 = 61$"],"correctAnswerIndex":1,"type":"multiple-choice","isDirty":false,"explanation":null,"shuffleOptions":{"stem":true,"answers":true},"rendered_question":"Phép tính nào sau đây là đúng?","rendered_options":["$6 \\times 7 = 48$","$8 \\times 7 = 56$","$9 \\times 6 = 52$","$7 \\times 9 = 61$"]},{"question":"Mai có $9$ hộp bút chì màu. Mỗi hộp có $7$ chiếc bút. Hỏi Mai có tất cả bao nhiêu chiếc bút chì màu?","options":["$54$ chiếc","$63$ chiếc","$70$ chiếc","$72$ chiếc"],"correctAnswerIndex":1,"type":"multiple-choice","isDirty":false,"explanation":null,"shuffleOptions":{"stem":true,"answers":true},"rendered_question":"Mai có $9$ hộp bút chì màu. Mỗi hộp có $7$ chiếc bút. Hỏi Mai có tất cả bao nhiêu chiếc bút chì màu?","rendered_options":["$54$ chiếc","$63$ chiếc","$70$ chiếc","$72$ chiếc"]},{"question":"Có $48$ viên kẹo chia đều cho $8$ bạn. Hỏi mỗi bạn được mấy viên kẹo?","options":["$5$ viên","$6$ viên","$7$ viên","$8$ viên"],"correctAnswerIndex":1,"type":"multiple-choice","isDirty":false,"explanation":null,"shuffleOptions":{"stem":true,"answers":true},"rendered_question":"Có $48$ viên kẹo chia đều cho $8$ bạn. Hỏi mỗi bạn được mấy viên kẹo?","rendered_options":["$5$ viên","$6$ viên","$7$ viên","$8$ viên"]}];
        const options = {"title":"Bài kiểm tra - 14/11/2025","timeLimit":45,"retries":1,"showAnswers":true,"showExplanation":true,"aiAssessment":true,"examCode":"GEU7DF","teacherName":"gggggggg","scoring":{"mc":5,"tf":2,"sa":2,"essay":1,"tfMethod":"progressive"}};
        const googleScriptUrl = "https://script.google.com/macros/s/AKfycbxV_S0rNHbOQx-hnjjlQGqdvLBN5GlTog0q8erd1XMpPX7XkuGjIxJnDEPPDJQnpGnf9g/exec";
        const apiKey = "AIzaSyAzvr2Py2_mr5Z4R3YWXi-dyO1ufA2paas";
        // The rest of the student-side app logic will be here...
        // This includes rendering questions, handling answers, timer, monitoring, submission, etc.
        // Due to space constraints, the full student-side app code is omitted here,
        // but it would use the variables above to function.
        // A placeholder is added below to represent the app's functionality.
        
        // Placeholder for student-side app logic
        document.addEventListener('DOMContentLoaded', () => {
             const app = document.getElementById('app');
             app.innerHTML = '<h1>' + options.title + '</h1>' +
                             '<p>Mã đề: ' + options.examCode + '</p>' +
                             '<p>Thời gian: ' + options.timeLimit + ' phút</p>' +
                             '<p class="mt-4 text-red-600">Lưu ý: Đây là bản xem trước. Giao diện làm bài thực tế của học sinh sẽ đầy đủ và có tính tương tác.</p>' +
                             '<div class="mt-6 space-y-4">' +
                             quizData.map((q, i) => {
                                let qHtml = '<div class="p-4 bg-white rounded-lg shadow-sm">' +
                                            '<p><strong>Câu ' + (i+1) + ':</strong> ' + q.rendered_question + '</p>';
                                if (q.rendered_options) {
                                    qHtml += q.rendered_options.map((opt, j) => '<p><strong>' + String.fromCharCode(65+j) + '.</strong> ' + opt + '</p>').join('');
                                }
                                qHtml += '</div>';
                                return qHtml;
                             }).join('') +
                             '</div>';
        });

    </script>
</body>
</html>